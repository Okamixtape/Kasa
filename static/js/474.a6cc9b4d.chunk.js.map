{"version":3,"file":"static/js/474.a6cc9b4d.chunk.js","mappings":"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","sources":["pages/FavoritesPage/index.jsx","components/Meta/index.jsx","assets/heart-icon.svg","components/FavoriteButton/index.jsx","components/GalleryCard/index.jsx","components/Gallery/index.jsx","components/BackLink/index.jsx"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport Meta from '../../components/Meta';\nimport Gallery from '../../components/Gallery';\nimport BackLink from '../../components/BackLink';\nimport './_favoritesPage.scss';\n\nconst FavoritesPage = () => {\n    const [favorites, setFavorites] = useState([]);\n    const [isLoading, setIsLoading] = useState(true);\n    const token = localStorage.getItem('token');\n\n    useEffect(() => {\n        if (!token) {\n            setIsLoading(false);\n            return;\n        }\n\n                fetch(`${process.env.REACT_APP_API_URL}/me/favorites`, {\n            headers: {\n                'Authorization': `Bearer ${token}`,\n            },\n        })\n        .then(response => response.json())\n        .then(data => {\n            if (Array.isArray(data)) {\n                setFavorites(data);\n            }\n            setIsLoading(false);\n        })\n        .catch(error => {\n            console.error('Error fetching favorites:', error);\n            setIsLoading(false);\n        });\n    }, [token]);\n\n        const handleToggleFavorite = (logementId, isFavorite) => {\n        if (!isFavorite) {\n            setFavorites(currentFavorites => \n                currentFavorites.filter(fav => fav.id !== logementId)\n            );\n        }\n    };\n\n    const favoriteIds = new Set(favorites.map(fav => fav.id));\n\n    return (\n        <>\n            <Meta \n                title=\"Mes Favoris\"\n                description=\"Consultez la liste de vos logements favoris sur Kasa.\"\n            />\n            <main className=\"kasa__wrapper fade-in favorites-page\">\n                <BackLink />\n                <h1 className=\"favorites-page__title\">Mes Favoris</h1>\n                {isLoading ? (\n                    <p>Chargement de vos favoris...</p>\n                ) : favorites.length > 0 ? (\n                    <Gallery filteredData={favorites} favorites={favoriteIds} onToggleFavorite={handleToggleFavorite} />\n                ) : (\n                    <p className=\"favorites-page__no-results\">Vous n'avez pas encore de favoris. Parcourez nos logements et cliquez sur le cœur pour en ajouter !</p>\n                )}\n            </main>\n        </>\n    );\n};\n\nexport default FavoritesPage;","import React from 'react';\nimport { Helmet } from 'react-helmet-async';\n\nconst Meta = ({ title, description, keywords, children }) => {\n  return (\n    <Helmet>\n      <title>{title ? `${title} | Kasa` : 'Kasa - Trouvez le logement de vos rêves'}</title>\n      <meta \n        name=\"description\" \n        content={description || 'Découvrez des milliers de logements uniques pour votre prochain voyage. Kasa vous met en relation avec des hôtes de confiance.'} \n      />\n      {keywords && <meta name=\"keywords\" content={keywords} />}\n      {children}\n    </Helmet>\n  );\n};\n\nexport default Meta;\n","var _path;\nconst _excluded = [\"title\", \"titleId\"];\nfunction _extends() { return _extends = Object.assign ? Object.assign.bind() : function (n) { for (var e = 1; e < arguments.length; e++) { var t = arguments[e]; for (var r in t) ({}).hasOwnProperty.call(t, r) && (n[r] = t[r]); } return n; }, _extends.apply(null, arguments); }\nfunction _objectWithoutProperties(e, t) { if (null == e) return {}; var o, r, i = _objectWithoutPropertiesLoose(e, t); if (Object.getOwnPropertySymbols) { var n = Object.getOwnPropertySymbols(e); for (r = 0; r < n.length; r++) o = n[r], -1 === t.indexOf(o) && {}.propertyIsEnumerable.call(e, o) && (i[o] = e[o]); } return i; }\nfunction _objectWithoutPropertiesLoose(r, e) { if (null == r) return {}; var t = {}; for (var n in r) if ({}.hasOwnProperty.call(r, n)) { if (-1 !== e.indexOf(n)) continue; t[n] = r[n]; } return t; }\nimport * as React from \"react\";\nfunction SvgHeartIcon(_ref, svgRef) {\n  let {\n      title,\n      titleId\n    } = _ref,\n    props = _objectWithoutProperties(_ref, _excluded);\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    viewBox: \"0 0 24 24\",\n    fill: \"none\",\n    xmlns: \"http://www.w3.org/2000/svg\",\n    ref: svgRef,\n    \"aria-labelledby\": titleId\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: titleId\n  }, title) : null, _path || (_path = /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M12.62 20.81C12.28 20.93 11.72 20.93 11.38 20.81C8.48 19.82 2 15.69 2 8.68998C2 5.59998 4.49 3.09998 7.56 3.09998C9.38 3.09998 10.99 3.97998 12 5.33998C13.01 3.97998 14.62 3.09998 16.44 3.09998C19.51 3.09998 22 5.59998 22 8.68998C22 15.69 15.52 19.82 12.62 20.81Z\",\n    stroke: \"#FFFFFF\",\n    strokeWidth: 1.5,\n    strokeLinecap: \"round\",\n    strokeLinejoin: \"round\"\n  })));\n}\nconst ForwardRef = /*#__PURE__*/React.forwardRef(SvgHeartIcon);\nexport default __webpack_public_path__ + \"static/media/heart-icon.773477bec1461c143ba9c75ad6529327.svg\";\nexport { ForwardRef as ReactComponent };","import React, { useState, useEffect } from 'react';\nimport './_favoriteButton.scss';\nimport { ReactComponent as HeartIcon } from '../../assets/heart-icon.svg';\n\nconst FavoriteButton = ({ logementId, initialIsFavorite, onToggle }) => {\n    const [isFavorite, setIsFavorite] = useState(initialIsFavorite);\n\n    useEffect(() => {\n        setIsFavorite(initialIsFavorite);\n    }, [initialIsFavorite]);\n    const [isLoading, setIsLoading] = useState(false);\n    const token = localStorage.getItem('token');\n\n\n\n    const handleToggleFavorite = async (e) => {\n        e.preventDefault(); // Prevent navigation when clicking the button on a card\n        if (isLoading || !token) return;\n\n        setIsLoading(true);\n        const method = isFavorite ? 'DELETE' : 'POST';\n        const url = isFavorite\n            ? `${process.env.REACT_APP_API_URL}/me/favorites/${logementId}`\n            : `${process.env.REACT_APP_API_URL}/me/favorites`;\n\n        try {\n            const response = await fetch(url, {\n                method,\n                headers: {\n                    'Content-Type': 'application/json',\n                    'Authorization': `Bearer ${token}`,\n                },\n                body: isFavorite ? null : JSON.stringify({ logementId }),\n            });\n\n            if (response.ok) {\n                const newIsFavorite = !isFavorite;\n                setIsFavorite(newIsFavorite);\n                if (onToggle) {\n                    onToggle(logementId, newIsFavorite);\n                }\n            } else {\n                console.error('Failed to update favorite status');\n            }\n        } catch (error) {\n            console.error('Error updating favorite status:', error);\n        } finally {\n            setIsLoading(false);\n        }\n    };\n\n    if (!token) return null; // Don't show the button if the user is not logged in\n\n    return (\n        <button\n            onClick={handleToggleFavorite}\n            className={`favorite-button ${isFavorite ? 'active' : ''}`}\n            aria-label={isFavorite ? 'Remove from favorites' : 'Add to favorites'}\n            disabled={isLoading}\n        >\n            <HeartIcon />\n        </button>\n    );\n};\n\nexport default FavoriteButton;","import React from 'react';\nimport { Link } from 'react-router-dom';\nimport './_gallery-card.scss';\nimport FavoriteButton from '../FavoriteButton';\n\nconst GalleryCard = ({ id, title, cover, price, isFavorite, onToggleFavorite }) => {\n    return (\n        <Link to={`/house/${id}`} className=\"gallery-card\">\n            <img src={cover} alt={title} className=\"gallery-card__image\" loading=\"lazy\" />\n            <div className=\"gallery-card__overlay\"></div>\n                        <FavoriteButton \n                logementId={id} \n                initialIsFavorite={isFavorite} \n                onToggle={onToggleFavorite} \n            />\n            <div className=\"gallery-card__info\">\n                <h2 className=\"gallery-card__title\">{title}</h2>\n                {price && <p className=\"gallery-card__price\">{price}€ / nuit</p>}\n            </div>\n        </Link>\n    );\n};\n\nexport default GalleryCard;\n","import React from 'react';\nimport './_gallery.scss';\nimport GalleryCard from '../GalleryCard';\n\nconst Gallery = ({ filteredData, favorites, onToggleFavorite }) => {\n\n    return (\n        <div className=\"gallery\">\n            {filteredData.length > 0 ? (\n                filteredData.map(house => (\n                    <GalleryCard\n                        key={house.id}\n                        id={house.id}\n                        cover={house.cover}\n                        title={house.title}\n                        price={house.price}\n                                                isFavorite={favorites.has(house.id)}\n                        onToggleFavorite={onToggleFavorite}\n                    />\n                ))\n            ) : (\n                <p className=\"gallery__no-results\">Aucun logement ne correspond à votre recherche.</p>\n            )}\n        </div>\n    );\n};\n\nexport default Gallery;","import React from 'react';\nimport { Link } from 'react-router-dom';\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\nimport { faChevronLeft } from '@fortawesome/free-solid-svg-icons';\nimport './_back-link.scss';\n\nconst BackLink = () => {\n    return (\n        <Link to=\"/\" className=\"back-link\">\n            <FontAwesomeIcon icon={faChevronLeft} />\n            <span>Retour à l'accueil</span>\n        </Link>\n    );\n};\n\nexport default BackLink;\n"],"names":["FavoritesPage","favorites","setFavorites","useState","isLoading","setIsLoading","token","localStorage","getItem","useEffect","fetch","concat","process","headers","then","response","json","data","Array","isArray","catch","error","console","favoriteIds","Set","map","fav","id","_jsxs","_Fragment","children","_jsx","Meta","title","description","className","BackLink","length","Gallery","filteredData","onToggleFavorite","handleToggleFavorite","logementId","isFavorite","currentFavorites","filter","_ref","keywords","Helmet","name","content","_path","_excluded","_extends","Object","assign","bind","n","e","arguments","t","r","hasOwnProperty","call","apply","SvgHeartIcon","svgRef","titleId","props","o","i","indexOf","_objectWithoutPropertiesLoose","getOwnPropertySymbols","propertyIsEnumerable","_objectWithoutProperties","viewBox","fill","xmlns","ref","d","stroke","strokeWidth","strokeLinecap","strokeLinejoin","ForwardRef","initialIsFavorite","onToggle","setIsFavorite","onClick","async","preventDefault","method","url","body","JSON","stringify","ok","newIsFavorite","disabled","HeartIcon","cover","price","Link","to","src","alt","loading","FavoriteButton","house","GalleryCard","has","FontAwesomeIcon","icon","faChevronLeft"],"sourceRoot":""}