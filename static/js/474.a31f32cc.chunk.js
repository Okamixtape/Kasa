"use strict";(self.webpackChunkkasa=self.webpackChunkkasa||[]).push([[474],{1474:(e,t,r)=>{r.r(t),r.d(t,{default:()=>i});var a=r(5043),n=r(1541),s=r(8128),o=r(8174),l=r(579);const i=()=>{const[e,t]=(0,a.useState)([]),[r,i]=(0,a.useState)(!0),c=localStorage.getItem("token");(0,a.useEffect)(()=>{c?fetch("".concat("https://kasa-backend.onrender.com/api","/me/favorites"),{headers:{Authorization:"Bearer ".concat(c)}}).then(e=>e.json()).then(e=>{Array.isArray(e)&&t(e),i(!1)}).catch(e=>{console.error("Error fetching favorites:",e),i(!1)}):i(!1)},[c]);const d=new Set(e.map(e=>e.id));return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(n.A,{title:"Mes Favoris",description:"Consultez la liste de vos logements favoris sur Kasa."}),(0,l.jsxs)("main",{className:"kasa__wrapper fade-in favorites-page",children:[(0,l.jsx)(o.A,{}),(0,l.jsx)("h1",{className:"favorites-page__title",children:"Mes Favoris"}),r?(0,l.jsx)("p",{children:"Chargement de vos favoris..."}):e.length>0?(0,l.jsx)(s.A,{filteredData:e,favorites:d,onToggleFavorite:(e,r)=>{r||t(t=>t.filter(t=>t.id!==e))}}):(0,l.jsx)("p",{className:"favorites-page__no-results",children:"Vous n'avez pas encore de favoris. Parcourez nos logements et cliquez sur le c\u0153ur pour en ajouter !"})]})]})}},1541:(e,t,r)=>{r.d(t,{A:()=>s});r(5043);var a=r(9367),n=r(579);const s=e=>{let{title:t,description:r,keywords:s,children:o}=e;return(0,n.jsxs)(a.mg,{children:[(0,n.jsx)("title",{children:t?"".concat(t," | Kasa"):"Kasa - Trouvez le logement de vos r\xeaves"}),(0,n.jsx)("meta",{name:"description",content:r||"D\xe9couvrez des milliers de logements uniques pour votre prochain voyage. Kasa vous met en relation avec des h\xf4tes de confiance."}),s&&(0,n.jsx)("meta",{name:"keywords",content:s}),o]})}},5101:(e,t,r)=>{r.d(t,{h:()=>i});var a,n=r(5043);const s=["title","titleId"];function o(){return o=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)({}).hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},o.apply(null,arguments)}function l(e,t){let{title:r,titleId:l}=e,i=function(e,t){if(null==e)return{};var r,a,n=function(e,t){if(null==e)return{};var r={};for(var a in e)if({}.hasOwnProperty.call(e,a)){if(-1!==t.indexOf(a))continue;r[a]=e[a]}return r}(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(a=0;a<s.length;a++)r=s[a],-1===t.indexOf(r)&&{}.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}(e,s);return n.createElement("svg",o({width:30,height:30,viewBox:"0 0 30 30",fill:"current",xmlns:"http://www.w3.org/2000/svg",ref:t,"aria-labelledby":l},i),r?n.createElement("title",{id:l},r):null,a||(a=n.createElement("path",{d:"M18.645 12L15 0L11.355 12H0L9.27 18.615L5.745 30L15 22.965L24.27 30L20.745 18.615L30 12H18.645Z",fill:"current"})))}const i=n.forwardRef(l);r.p},8128:(e,t,r)=>{r.d(t,{A:()=>h});var a,n=r(5043),s=r(5475);const o=["title","titleId"];function l(){return l=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)({}).hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},l.apply(null,arguments)}function i(e,t){let{title:r,titleId:s}=e,i=function(e,t){if(null==e)return{};var r,a,n=function(e,t){if(null==e)return{};var r={};for(var a in e)if({}.hasOwnProperty.call(e,a)){if(-1!==t.indexOf(a))continue;r[a]=e[a]}return r}(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(a=0;a<s.length;a++)r=s[a],-1===t.indexOf(r)&&{}.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}(e,o);return n.createElement("svg",l({viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",ref:t,"aria-labelledby":s},i),r?n.createElement("title",{id:s},r):null,a||(a=n.createElement("path",{d:"M12.62 20.81C12.28 20.93 11.72 20.93 11.38 20.81C8.48 19.82 2 15.69 2 8.68998C2 5.59998 4.49 3.09998 7.56 3.09998C9.38 3.09998 10.99 3.97998 12 5.33998C13.01 3.97998 14.62 3.09998 16.44 3.09998C19.51 3.09998 22 5.59998 22 8.68998C22 15.69 15.52 19.82 12.62 20.81Z",stroke:"#FFFFFF",strokeWidth:1.5,strokeLinecap:"round",strokeLinejoin:"round"})))}const c=n.forwardRef(i);r.p;var d=r(579);const u=e=>{let{logementId:t,initialIsFavorite:r,onToggle:a}=e;const[s,o]=(0,n.useState)(r);(0,n.useEffect)(()=>{o(r)},[r]);const[l,i]=(0,n.useState)(!1),u=localStorage.getItem("token");return u?(0,d.jsx)("button",{onClick:async e=>{if(e.preventDefault(),l||!u)return;i(!0);const r=s?"DELETE":"POST",n=s?"".concat("https://kasa-backend.onrender.com/api","/me/favorites/").concat(t):"".concat("https://kasa-backend.onrender.com/api","/me/favorites");try{if((await fetch(n,{method:r,headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(u)},body:s?null:JSON.stringify({logementId:t})})).ok){const e=!s;o(e),a&&a(t,e)}else console.error("Failed to update favorite status")}catch(c){console.error("Error updating favorite status:",c)}finally{i(!1)}},className:"favorite-button ".concat(s?"active":""),"aria-label":s?"Remove from favorites":"Add to favorites",disabled:l,children:(0,d.jsx)(c,{})}):null};var f=r(3652),g=r(5101);const v=e=>{let{id:t,title:r,cover:a,price:o,isFavorite:l,onToggleFavorite:i,tags:c=[],rating:v=0}=e;const[h,p]=(0,n.useState)(!1),m=c.find(e=>["Appartement","Maison","Loft","Studio"].includes(e))||"Logement";return(0,d.jsx)("div",{className:"gallery-card-wrapper",children:(0,d.jsxs)(s.N_,{to:"/house/".concat(t),className:"gallery-card",children:[(0,d.jsxs)("div",{className:"card-image-container",children:[a&&!h?(0,d.jsx)("img",{src:a,alt:r,className:"gallery-card__image",loading:"lazy",onError:()=>{p(!0)}}):(0,d.jsx)("div",{className:"gallery-card__placeholder",children:(0,d.jsx)("img",{src:f,alt:"Kasa Logo",className:"gallery-card__placeholder-logo"})}),(0,d.jsx)(u,{logementId:t,initialIsFavorite:l,onToggle:i})]}),(0,d.jsxs)("div",{className:"gallery-card__info",children:[(0,d.jsxs)("div",{className:"info-line-1",children:[(0,d.jsx)("span",{className:"property-type",children:m}),(0,d.jsx)("div",{className:"rating",children:(()=>{const e=[];for(let t=0;t<5;t++)e.push((0,d.jsx)(g.h,{className:"star-icon ".concat(t<v?"filled":"")},t));return e})()})]}),(0,d.jsx)("h2",{className:"gallery-card__title",children:r}),(0,d.jsxs)("p",{className:"gallery-card__price",children:[(0,d.jsxs)("strong",{children:[o,"\u20ac"]})," / nuit"]})]})]})})},h=e=>{let{filteredData:t,favorites:r,onToggleFavorite:a}=e;return(0,d.jsx)("div",{className:"gallery",children:t.length>0?t.map(e=>(0,d.jsx)(v,{id:e.id,cover:e.cover,title:e.title,price:e.price,tags:e.tags,rating:e.rating,isFavorite:r.has(e.id),onToggleFavorite:a},e.id)):(0,d.jsx)("p",{className:"gallery__no-results",children:"Aucun logement ne correspond \xe0 votre recherche."})})}},8174:(e,t,r)=>{r.d(t,{A:()=>l});r(5043);var a=r(5475),n=r(985),s=r(7929),o=r(579);const l=()=>(0,o.jsxs)(a.N_,{to:"/",className:"back-link",children:[(0,o.jsx)(n.g,{icon:s.Wzs}),(0,o.jsx)("span",{children:"Retour \xe0 l'accueil"})]})}}]);
//# sourceMappingURL=474.a31f32cc.chunk.js.map