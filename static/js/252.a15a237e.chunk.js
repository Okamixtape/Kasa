"use strict";(self.webpackChunkkasa=self.webpackChunkkasa||[]).push([[252],{252:(e,t,a)=>{a.r(t),a.d(t,{default:()=>N});var n=a(43),s=a(367),o=a(379),i=a(216),l=a(579);const r=[{id:"apartment",label:"Appartement"},{id:"house",label:"Maison"},{id:"guest-house",label:"Maison d'h\xf4tes"},{id:"hotel",label:"H\xf4tel"}],c=e=>{let{onNext:t,formData:a}=e;const[s,o]=(0,n.useState)(a.propertyType||null);return(0,l.jsxs)("div",{className:"onboarding-step",children:[(0,l.jsx)("h2",{children:"Quel type de logement proposez-vous ?"}),(0,l.jsx)("div",{className:"property-types",children:r.map(e=>(0,l.jsx)("button",{className:"type-button ".concat(s===e.id?"selected":""),onClick:()=>o(e.id),children:e.label},e.id))}),(0,l.jsx)("div",{className:"navigation-buttons",children:(0,l.jsx)("button",{onClick:()=>t({propertyType:s}),disabled:!s,children:"Suivant"})})]})},d=e=>{let{onNext:t,onBack:a,formData:s}=e;const[o,i]=(0,n.useState)(s.address||""),[r,c]=(0,n.useState)(s.city||""),[d,u]=(0,n.useState)(s.postalCode||""),[p,h]=(0,n.useState)(s.country||""),m=o&&r&&d&&p;return(0,l.jsxs)("div",{className:"onboarding-step",children:[(0,l.jsx)("h2",{children:"O\xf9 se situe votre logement ?"}),(0,l.jsxs)("div",{className:"address-form",children:[(0,l.jsx)("input",{type:"text",placeholder:"Adresse",value:o,onChange:e=>i(e.target.value)}),(0,l.jsx)("input",{type:"text",placeholder:"Ville",value:r,onChange:e=>c(e.target.value)}),(0,l.jsx)("input",{type:"text",placeholder:"Code Postal",value:d,onChange:e=>u(e.target.value)}),(0,l.jsx)("input",{type:"text",placeholder:"Pays",value:p,onChange:e=>h(e.target.value)})]}),(0,l.jsxs)("div",{className:"navigation-buttons",children:[(0,l.jsx)("button",{onClick:a,className:"back-button",children:"Pr\xe9c\xe9dent"}),(0,l.jsx)("button",{onClick:()=>t({address:o,city:r,postalCode:d,country:p}),disabled:!m,children:"Suivant"})]})]})},u=e=>{let{label:t,value:a,onIncrement:n,onDecrement:s}=e;return(0,l.jsxs)("div",{className:"counter",children:[(0,l.jsx)("span",{className:"counter-label",children:t}),(0,l.jsxs)("div",{className:"counter-controls",children:[(0,l.jsx)("button",{onClick:s,disabled:a<=0,children:"-"}),(0,l.jsx)("span",{className:"counter-value",children:a}),(0,l.jsx)("button",{onClick:n,children:"+"})]})]})},p=e=>{let{onNext:t,onBack:a,formData:s}=e;const[o,i]=(0,n.useState)(s.guests||1),[r,c]=(0,n.useState)(s.bedrooms||1),[d,p]=(0,n.useState)(s.bathrooms||1);return(0,l.jsxs)("div",{className:"onboarding-step",children:[(0,l.jsx)("h2",{children:"Informations de base sur le logement"}),(0,l.jsxs)("div",{className:"basics-form",children:[(0,l.jsx)(u,{label:"Voyageurs",value:o,onIncrement:()=>i(o+1),onDecrement:()=>i(o-1)}),(0,l.jsx)(u,{label:"Chambres",value:r,onIncrement:()=>c(r+1),onDecrement:()=>c(r-1)}),(0,l.jsx)(u,{label:"Salles de bain",value:d,onIncrement:()=>p(d+1),onDecrement:()=>p(d-1)})]}),(0,l.jsxs)("div",{className:"navigation-buttons",children:[(0,l.jsx)("button",{onClick:a,className:"back-button",children:"Pr\xe9c\xe9dent"}),(0,l.jsx)("button",{onClick:()=>t({guests:o,bedrooms:r,bathrooms:d}),children:"Suivant"})]})]})},h=[{id:"wifi",label:"Wi-Fi"},{id:"kitchen",label:"Cuisine"},{id:"tv",label:"T\xe9l\xe9vision"},{id:"air-conditioning",label:"Climatisation"},{id:"washing-machine",label:"Lave-linge"},{id:"parking",label:"Parking gratuit"}],m=e=>{let{onNext:t,onBack:a,formData:s}=e;const[o,i]=(0,n.useState)(s.amenities||[]);return(0,l.jsxs)("div",{className:"onboarding-step",children:[(0,l.jsx)("h2",{children:"Quels \xe9quipements proposez-vous ?"}),(0,l.jsx)("div",{className:"amenities-grid",children:h.map(e=>(0,l.jsx)("button",{className:"amenity-button ".concat(o.includes(e.id)?"selected":""),onClick:()=>{return t=e.id,void i(e=>e.includes(t)?e.filter(e=>e!==t):[...e,t]);var t},children:e.label},e.id))}),(0,l.jsxs)("div",{className:"navigation-buttons",children:[(0,l.jsx)("button",{onClick:a,className:"back-button",children:"Pr\xe9c\xe9dent"}),(0,l.jsx)("button",{onClick:()=>t({amenities:o}),children:"Suivant"})]})]})},x=e=>{let{onNext:t,onBack:a,formData:s}=e;const[o,i]=(0,n.useState)(s.photos||[]),[r,c]=(0,n.useState)(s.photos?s.photos.map(e=>URL.createObjectURL(e)):[]);(0,n.useEffect)(()=>()=>{r.forEach(e=>URL.revokeObjectURL(e))},[r]);return(0,l.jsxs)("div",{className:"onboarding-step",children:[(0,l.jsx)("h2",{children:"Ajoutez des photos de votre logement"}),(0,l.jsxs)("div",{className:"photo-uploader",children:[(0,l.jsx)("input",{type:"file",multiple:!0,accept:"image/*",onChange:e=>{const t=Array.from(e.target.files);i(e=>[...e,...t]);const a=t.map(e=>URL.createObjectURL(e));c(e=>[...e,...a])},id:"photo-upload-input",style:{display:"none"}}),(0,l.jsx)("label",{htmlFor:"photo-upload-input",className:"photo-upload-label",children:"Cliquez pour ajouter des photos"}),(0,l.jsx)("div",{className:"photo-preview-grid",children:r.map((e,t)=>(0,l.jsx)("img",{src:e,alt:"Aper\xe7u ".concat(t+1),className:"photo-preview"},t))})]}),(0,l.jsxs)("div",{className:"navigation-buttons",children:[(0,l.jsx)("button",{onClick:a,className:"back-button",children:"Pr\xe9c\xe9dent"}),(0,l.jsx)("button",{onClick:()=>t({photos:o}),disabled:0===o.length,children:"Suivant"})]})]})},b=e=>{let{onNext:t,onBack:a,formData:s}=e;const[o,i]=(0,n.useState)(s.title||""),[r,c]=(0,n.useState)(s.description||""),d=o.length>=5&&r.length>=20;return(0,l.jsxs)("div",{className:"onboarding-step",children:[(0,l.jsx)("h2",{children:"Titre et description de l'annonce"}),(0,l.jsxs)("div",{className:"text-inputs-form",children:[(0,l.jsx)("input",{type:"text",placeholder:"Titre de l'annonce (ex: Appartement cosy au coeur de Paris)",value:o,onChange:e=>i(e.target.value)}),(0,l.jsx)("textarea",{placeholder:"D\xe9crivez votre logement en quelques mots...",value:r,onChange:e=>c(e.target.value),rows:"6"})]}),(0,l.jsxs)("div",{className:"navigation-buttons",children:[(0,l.jsx)("button",{onClick:a,className:"back-button",children:"Pr\xe9c\xe9dent"}),(0,l.jsx)("button",{onClick:()=>t({title:o,description:r}),disabled:!d,children:"Suivant"})]})]})},j=e=>{let{onNext:t,onBack:a,formData:s}=e;const[o,i]=(0,n.useState)(s.price||""),r=o>0;return(0,l.jsxs)("div",{className:"onboarding-step",children:[(0,l.jsx)("h2",{children:"Fixez votre prix par nuit"}),(0,l.jsx)("div",{className:"price-form",children:(0,l.jsx)("input",{type:"number",placeholder:"Prix en \u20ac",value:o,onChange:e=>i(e.target.value),className:"price-input"})}),(0,l.jsxs)("div",{className:"navigation-buttons",children:[(0,l.jsx)("button",{onClick:a,className:"back-button",children:"Pr\xe9c\xe9dent"}),(0,l.jsx)("button",{onClick:()=>t({price:o}),disabled:!r,children:"Suivant"})]})]})},v=e=>{let{onBack:t,formData:a,navigate:n}=e;return(0,l.jsxs)("div",{className:"onboarding-step",children:[(0,l.jsx)("h2",{children:"R\xe9capitulatif de l'annonce"}),(0,l.jsxs)("div",{className:"summary-details",children:[(0,l.jsx)("h3",{children:a.title}),(0,l.jsxs)("p",{children:[a.address,", ",a.city,", ",a.postalCode,", ",a.country]}),(0,l.jsx)("div",{className:"photo-preview-grid",children:a.photos&&a.photos.map((e,t)=>(0,l.jsx)("img",{src:URL.createObjectURL(e),alt:"Aper\xe7u ".concat(t+1),className:"photo-preview"},t))}),(0,l.jsxs)("p",{children:[(0,l.jsxs)("strong",{children:[a.price,"\u20ac"]})," par nuit"]}),(0,l.jsx)("p",{children:a.description})]}),(0,l.jsxs)("div",{className:"navigation-buttons",children:[(0,l.jsx)("button",{onClick:t,className:"back-button",children:"Pr\xe9c\xe9dent"}),(0,l.jsx)("button",{onClick:async()=>{const e=localStorage.getItem("token");if(!e)return void alert("Vous devez \xeatre connect\xe9 pour publier une annonce.");const t=new FormData;t.append("title",a.title),t.append("description",a.description),t.append("price",a.price),t.append("location",a.address),t.append("propertyType",a.propertyType),a.amenities&&a.amenities.forEach(e=>t.append("equipments[]",e)),a.photos&&a.photos.forEach(e=>{t.append("pictures",e)});try{const a=await fetch("".concat("https://your-production-backend.com/api","/logements"),{method:"POST",headers:{Authorization:"Bearer ".concat(e)},body:t});if(!a.ok){const e=await a.json();throw new Error(e.message||"La cr\xe9ation de l'annonce a \xe9chou\xe9.")}alert("Annonce cr\xe9\xe9e avec succ\xe8s ! Vous allez \xeatre redirig\xe9."),n("/")}catch(s){console.error("Erreur lors de la soumission de l'annonce:",s),alert(s.message)}},className:"publish-button",children:"Publier l'annonce"})]})]})},g=()=>{const e=(0,i.Zp)(),[t,a]=(0,n.useState)(1),[s,r]=(0,n.useState)({}),u=e=>{r((0,o.A)((0,o.A)({},s),e)),a(t+1)},h=()=>{a(t-1)};return(0,l.jsxs)("div",{className:"host-onboarding-form",children:[1===t&&(0,l.jsx)(c,{onNext:u,formData:s}),2===t&&(0,l.jsx)(d,{onNext:u,onBack:h,formData:s}),3===t&&(0,l.jsx)(p,{onNext:u,onBack:h,formData:s}),4===t&&(0,l.jsx)(m,{onNext:u,onBack:h,formData:s}),5===t&&(0,l.jsx)(x,{onNext:u,onBack:h,formData:s}),6===t&&(0,l.jsx)(b,{onNext:u,onBack:h,formData:s}),7===t&&(0,l.jsx)(j,{onNext:u,onBack:h,formData:s}),8===t&&(0,l.jsx)(v,{onBack:h,formData:s,navigate:e})]})},N=()=>(0,l.jsxs)("main",{className:"host-onboarding-page container",children:[(0,l.jsx)(s.mg,{children:(0,l.jsx)("title",{children:"Cr\xe9ez votre annonce - Kasa"})}),(0,l.jsx)(g,{})]})}}]);
//# sourceMappingURL=252.a15a237e.chunk.js.map