"use strict";(self.webpackChunkkasa=self.webpackChunkkasa||[]).push([[296],{1541:(e,t,s)=>{s.d(t,{A:()=>a});s(5043);var r=s(9367),n=s(579);const a=e=>{let{title:t,description:s,keywords:a,children:i}=e;return(0,n.jsxs)(r.mg,{children:[(0,n.jsx)("title",{children:t?"".concat(t," | Kasa"):"Kasa - Trouvez le logement de vos r\xeaves"}),(0,n.jsx)("meta",{name:"description",content:s||"D\xe9couvrez des milliers de logements uniques pour votre prochain voyage. Kasa vous met en relation avec des h\xf4tes de confiance."}),a&&(0,n.jsx)("meta",{name:"keywords",content:a}),i]})}},4887:(e,t,s)=>{s.d(t,{A:()=>a});s(5043);var r=s(3652),n=s(579);const a=e=>{let{cover:t,tags:s=[],reviews:a=[],title:i,location:l,id:o,onBooking:c,titleAs:d="h3",price:u}=e;return(0,n.jsxs)("div",{className:"houseCard",children:[t&&(0,n.jsx)("img",{src:t,alt:i,className:"houseCard__cover"}),!t&&(0,n.jsx)("div",{className:"houseCard__placeholder",children:(0,n.jsx)("img",{src:r,alt:"Kasa Logo",className:"houseCard__placeholder-logo"})}),(0,n.jsxs)("div",{className:"houseCard__content",children:[(0,n.jsx)(d,{className:"houseCard__title",children:i}),(0,n.jsx)("p",{className:"houseCard__location",children:l}),u&&(0,n.jsxs)("p",{className:"houseCard__price",children:[u,"\u20ac / nuit"]}),(0,n.jsx)("div",{className:"houseCard__tags",children:s.map(e=>(0,n.jsx)("p",{className:"houseCard__tag",children:e},e))})]})]},o)}},5101:(e,t,s)=>{s.d(t,{h:()=>o});var r,n=s(5043);const a=["title","titleId"];function i(){return i=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var r in s)({}).hasOwnProperty.call(s,r)&&(e[r]=s[r])}return e},i.apply(null,arguments)}function l(e,t){let{title:s,titleId:l}=e,o=function(e,t){if(null==e)return{};var s,r,n=function(e,t){if(null==e)return{};var s={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(-1!==t.indexOf(r))continue;s[r]=e[r]}return s}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)s=a[r],-1===t.indexOf(s)&&{}.propertyIsEnumerable.call(e,s)&&(n[s]=e[s])}return n}(e,a);return n.createElement("svg",i({width:30,height:30,viewBox:"0 0 30 30",fill:"current",xmlns:"http://www.w3.org/2000/svg",ref:t,"aria-labelledby":l},o),s?n.createElement("title",{id:l},s):null,r||(r=n.createElement("path",{d:"M18.645 12L15 0L11.355 12H0L9.27 18.615L5.745 30L15 22.965L24.27 30L20.745 18.615L30 12H18.645Z",fill:"current"})))}const o=n.forwardRef(l);s.p},6467:()=>{},7199:(e,t,s)=>{s.r(t),s.d(t,{default:()=>N});var r=s(5043),n=s(1541),a=s(8128),i=s(9379),l=s(579);const o=e=>{let{onFilterChange:t}=e;const[s,n]=(0,r.useState)(""),[a,o]=(0,r.useState)(500),[c,d]=(0,r.useState)(!1),[u,h]=(0,r.useState)({quartier:[],type:[],commodite:[]});(0,r.useEffect)(()=>{t({searchTerm:s,maxPrice:a,filters:u})},[s,a,u,t]);return(0,l.jsxs)("div",{className:"search-section",children:[(0,l.jsxs)("div",{className:"search-bar",children:[(0,l.jsx)("input",{type:"text",className:"search-input",placeholder:"Rechercher une location...",value:s,onChange:e=>n(e.target.value)}),(0,l.jsxs)("div",{className:"price-range",children:[(0,l.jsx)("span",{children:"Prix max:"}),(0,l.jsx)("input",{type:"number",className:"price-input",value:a,onChange:e=>o(e.target.value)}),(0,l.jsx)("span",{children:"\u20ac"})]}),(0,l.jsxs)("button",{className:"toggle-filters",onClick:()=>d(!c),children:[(0,l.jsx)("span",{children:"Filtres"}),(0,l.jsx)("span",{children:c?"\u25b2":"\u25bc"})]})]}),(0,l.jsx)("div",{className:"filters-container ".concat(c?"active":""),children:(0,l.jsx)("div",{className:"filters-grid",children:Object.entries({Quartiers:["Batignolles","Montmartre","Canal Saint Martin","R\xe9publique"],"Type de logement":["Appartement","Studio","Loft","Maison"],"Commodit\xe9s":["Proche m\xe9tros","Commerces","Culture","Nature"]}).map(e=>{let[t,s]=e;return(0,l.jsxs)("div",{className:"filter-group",children:[(0,l.jsx)("h4",{children:t}),(0,l.jsx)("div",{className:"filter-tags",children:s.map(e=>{var s;const r=t.toLowerCase().replace(" de logement","").replace("s",""),n=null===(s=u[r])||void 0===s?void 0:s.includes(e);return(0,l.jsx)("span",{className:"filter-tag ".concat(n?"active":""),onClick:()=>((e,t)=>{const s=e.toLowerCase().replace(" de logement","").replace("s","");h(e=>{const r=e[s]||[],n=r.includes(t)?r.filter(e=>e!==t):[...r,t];return(0,i.A)((0,i.A)({},e),{},{[s]:n})})})(t,e),children:e},e)})})]},t)})})})]})},c=()=>{const[e,t]=(0,r.useState)(!1),s=()=>{window.pageYOffset>300?t(!0):t(!1)};return(0,r.useEffect)(()=>(window.addEventListener("scroll",s),()=>{window.removeEventListener("scroll",s)}),[]),(0,l.jsx)("div",{className:"back-to-top",children:e&&(0,l.jsx)("button",{onClick:()=>{window.scrollTo({top:0,behavior:"smooth"})},className:"back-to-top__button","aria-label":"Retour en haut",children:(0,l.jsx)("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:(0,l.jsx)("path",{d:"M12 8L6 14L7.41 15.41L12 10.83L16.59 15.41L18 14L12 8Z",fill:"white"})})})})};var d=s(9896),u=s(9419),h=s(9349),p=s(6036),m=s(3318),g=s(3216),v=s(8223),x=s(228),f=s.n(x),j=(s(6433),s(9573),s(6467),s(4887));const w=e=>{let{points:t}=e;const s=(0,d.ko)();return(0,r.useEffect)(()=>{if(t&&t.length>0){const e=f().latLngBounds(t);s.fitBounds(e,{padding:[50,50]})}},[t,s]),null},y=e=>{let{logements:t}=e;const s=(0,g.Zp)();if(!t||0===t.length)return(0,l.jsx)("div",{children:"Aucun logement \xe0 afficher sur la carte."});const r=e=>{if(e.coordinates&&e.coordinates.latitude)return[e.coordinates.latitude,e.coordinates.longitude];const t=e.location.toLowerCase();return t.includes("paris")?[48.8566,2.3522]:t.includes("lyon")?[45.764,4.8357]:t.includes("marseille")?[43.2965,5.3698]:t.includes("lille")?[50.6292,3.0573]:null},n=t.map(e=>(0,i.A)((0,i.A)({},e),{},{position:r(e)})).filter(e=>null!==e.position),a=n.map(e=>e.position);return(0,l.jsxs)(u.W,{className:"global-map",center:[46.603354,1.888334],zoom:6,scrollWheelZoom:!1,children:[(0,l.jsx)(w,{points:a}),(0,l.jsx)(h.e,{url:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",attribution:'\xa9 <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors'}),(0,l.jsx)(v.A,{zoomToBoundsOnClick:!0,showCoverageOnHover:!0,spiderfyOnMaxZoom:!0,children:n.map(e=>{const t=f().divIcon({className:"price-marker",html:"<span>".concat(e.price,"\u20ac</span>"),iconSize:null,popupAnchor:[0,-20],iconAnchor:[0,0]});return(0,l.jsx)(p.p,{position:e.position,icon:t,children:(0,l.jsx)(m.z,{className:"map-popup",children:(0,l.jsx)("div",{onClick:()=>s("/house/".concat(e.id)),style:{cursor:"pointer"},children:(0,l.jsx)(j.A,{id:e.id,title:e.title,location:e.address||e.location,price:e.price,tags:e.tags,titleAs:"h4"})})})},e.id)})})]})},N=()=>{const[e,t]=(0,r.useState)([]),[s,i]=(0,r.useState)([]),[d,u]=(0,r.useState)("list"),[h,p]=(0,r.useState)({searchTerm:"",maxPrice:500,filters:{quartier:[],type:[],commodite:[]}}),[m,g]=(0,r.useState)(new Set),v=localStorage.getItem("token");(0,r.useEffect)(()=>{fetch("".concat("https://kasa-backend.onrender.com/api","/logements")).then(e=>e.json()).then(e=>{t(e),i(e)}).catch(e=>console.error("Error fetching housing data:",e)),v&&fetch("".concat("https://kasa-backend.onrender.com/api","/me/favorites"),{headers:{Authorization:"Bearer ".concat(v)}}).then(e=>e.json()).then(e=>{Array.isArray(e)&&g(new Set(e.map(e=>e.id)))}).catch(e=>console.error("Error fetching favorites:",e))},[v]),(0,r.useEffect)(()=>{(()=>{const t=e.filter(e=>{const{searchTerm:t,maxPrice:s,filters:r}=h,n=t.toLowerCase(),a=!n||e.title.toLowerCase().includes(n)||e.location.toLowerCase().includes(n),i=e.price<=s,l=Object.entries(r).every(t=>{let[s,r]=t;return 0===r.length||r.every(t=>{var s;return null===(s=e.tags)||void 0===s?void 0:s.includes(t)})});return a&&i&&l});i(t)})()},[h,e]);return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(n.A,{}),(0,l.jsx)("main",{className:"kasa__wrapper fade-in",children:(0,l.jsxs)("div",{className:"container home-page-grid",children:[(0,l.jsxs)("section",{className:"hero",children:[(0,l.jsx)("h1",{children:"Chez vous, partout et ailleurs"}),(0,l.jsx)("p",{children:"D\xe9couvrez plus de 500 logements de qualit\xe9 v\xe9rifi\xe9s"})]}),(0,l.jsx)(o,{onFilterChange:p}),(0,l.jsxs)("div",{className:"results-header",children:[(0,l.jsxs)("div",{className:"view-toggle",children:[(0,l.jsxs)("button",{className:"view-toggle__button ".concat("list"===d?"active":""),onClick:()=>u("list"),children:[(0,l.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[(0,l.jsx)("line",{x1:"8",y1:"6",x2:"21",y2:"6"}),(0,l.jsx)("line",{x1:"8",y1:"12",x2:"21",y2:"12"}),(0,l.jsx)("line",{x1:"8",y1:"18",x2:"21",y2:"18"}),(0,l.jsx)("line",{x1:"3",y1:"6",x2:"3.01",y2:"6"}),(0,l.jsx)("line",{x1:"3",y1:"12",x2:"3.01",y2:"12"}),(0,l.jsx)("line",{x1:"3",y1:"18",x2:"3.01",y2:"18"})]}),(0,l.jsx)("span",{children:"Liste"})]}),(0,l.jsxs)("button",{className:"view-toggle__button ".concat("map"===d?"active":""),onClick:()=>u("map"),children:[(0,l.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[(0,l.jsx)("polygon",{points:"1 6 1 22 8 18 16 22 23 18 23 2 16 6 8 2 1 6"}),(0,l.jsx)("line",{x1:"8",y1:"2",x2:"8",y2:"18"}),(0,l.jsx)("line",{x1:"16",y1:"6",x2:"16",y2:"22"})]}),(0,l.jsx)("span",{children:"Carte"})]})]}),(0,l.jsx)("div",{className:"results-info",children:(0,l.jsxs)("div",{className:"results-count",children:[s.length," logement",s.length>1?"s":""," trouv\xe9",s.length>1?"s":""]})})]}),(0,l.jsx)("div",{className:"properties-grid view-section ".concat("list"===d?"visible":""),children:(0,l.jsx)(a.A,{filteredData:s,favorites:m,onToggleFavorite:(e,t)=>{const s=new Set(m);t?s.add(e):s.delete(e),g(s)}})}),(0,l.jsxs)("div",{className:"map-container view-section ".concat("map"===d?"visible":""),children:[(0,l.jsxs)("div",{className:"map-header",children:[(0,l.jsx)("div",{className:"map-title",children:"Localisation des logements"}),(0,l.jsx)("div",{className:"map-subtitle",children:"Carte des logements"})]}),(0,l.jsx)(y,{logements:s})]})]})}),(0,l.jsx)(c,{})]})}},8128:(e,t,s)=>{s.d(t,{A:()=>g});var r,n=s(5043),a=s(5475);const i=["title","titleId"];function l(){return l=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var r in s)({}).hasOwnProperty.call(s,r)&&(e[r]=s[r])}return e},l.apply(null,arguments)}function o(e,t){let{title:s,titleId:a}=e,o=function(e,t){if(null==e)return{};var s,r,n=function(e,t){if(null==e)return{};var s={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(-1!==t.indexOf(r))continue;s[r]=e[r]}return s}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)s=a[r],-1===t.indexOf(s)&&{}.propertyIsEnumerable.call(e,s)&&(n[s]=e[s])}return n}(e,i);return n.createElement("svg",l({viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",ref:t,"aria-labelledby":a},o),s?n.createElement("title",{id:a},s):null,r||(r=n.createElement("path",{d:"M12.62 20.81C12.28 20.93 11.72 20.93 11.38 20.81C8.48 19.82 2 15.69 2 8.68998C2 5.59998 4.49 3.09998 7.56 3.09998C9.38 3.09998 10.99 3.97998 12 5.33998C13.01 3.97998 14.62 3.09998 16.44 3.09998C19.51 3.09998 22 5.59998 22 8.68998C22 15.69 15.52 19.82 12.62 20.81Z",stroke:"#FFFFFF",strokeWidth:1.5,strokeLinecap:"round",strokeLinejoin:"round"})))}const c=n.forwardRef(o);s.p;var d=s(579);const u=e=>{let{logementId:t,initialIsFavorite:s,onToggle:r}=e;const[a,i]=(0,n.useState)(s);(0,n.useEffect)(()=>{i(s)},[s]);const[l,o]=(0,n.useState)(!1),u=localStorage.getItem("token");return u?(0,d.jsx)("button",{onClick:async e=>{if(e.preventDefault(),l||!u)return;o(!0);const s=a?"DELETE":"POST",n=a?"".concat("https://kasa-backend.onrender.com/api","/me/favorites/").concat(t):"".concat("https://kasa-backend.onrender.com/api","/me/favorites");try{if((await fetch(n,{method:s,headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(u)},body:a?null:JSON.stringify({logementId:t})})).ok){const e=!a;i(e),r&&r(t,e)}else console.error("Failed to update favorite status")}catch(c){console.error("Error updating favorite status:",c)}finally{o(!1)}},className:"favorite-button ".concat(a?"active":""),"aria-label":a?"Remove from favorites":"Add to favorites",disabled:l,children:(0,d.jsx)(c,{})}):null};var h=s(3652),p=s(5101);const m=e=>{let{id:t,title:s,cover:r,price:i,isFavorite:l,onToggleFavorite:o,tags:c=[],rating:m=0}=e;const[g,v]=(0,n.useState)(!1),x=c.find(e=>["Appartement","Maison","Loft","Studio"].includes(e))||"Logement";return(0,d.jsx)("div",{className:"gallery-card-wrapper",children:(0,d.jsxs)(a.N_,{to:"/house/".concat(t),className:"gallery-card",children:[(0,d.jsxs)("div",{className:"card-image-container",children:[r&&!g?(0,d.jsx)("img",{src:r,alt:s,className:"gallery-card__image",loading:"lazy",onError:()=>{v(!0)}}):(0,d.jsx)("div",{className:"gallery-card__placeholder",children:(0,d.jsx)("img",{src:h,alt:"Kasa Logo",className:"gallery-card__placeholder-logo"})}),(0,d.jsx)(u,{logementId:t,initialIsFavorite:l,onToggle:o})]}),(0,d.jsxs)("div",{className:"gallery-card__info",children:[(0,d.jsxs)("div",{className:"info-line-1",children:[(0,d.jsx)("span",{className:"property-type",children:x}),(0,d.jsx)("div",{className:"rating",children:(()=>{const e=[];for(let t=0;t<5;t++)e.push((0,d.jsx)(p.h,{className:"star-icon ".concat(t<m?"filled":"")},t));return e})()})]}),(0,d.jsx)("h2",{className:"gallery-card__title",children:s}),(0,d.jsxs)("p",{className:"gallery-card__price",children:[(0,d.jsxs)("strong",{children:[i,"\u20ac"]})," / nuit"]})]})]})})},g=e=>{let{filteredData:t,favorites:s,onToggleFavorite:r}=e;return(0,d.jsx)("div",{className:"gallery",children:t.length>0?t.map(e=>(0,d.jsx)(m,{id:e.id,cover:e.cover,title:e.title,price:e.price,tags:e.tags,rating:e.rating,isFavorite:s.has(e.id),onToggleFavorite:r},e.id)):(0,d.jsx)("p",{className:"gallery__no-results",children:"Aucun logement ne correspond \xe0 votre recherche."})})}}}]);
//# sourceMappingURL=296.481071c5.chunk.js.map