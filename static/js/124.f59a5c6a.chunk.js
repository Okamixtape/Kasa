"use strict";(self.webpackChunkkasa=self.webpackChunkkasa||[]).push([[124],{1358:(e,t,r)=>{r.d(t,{A:()=>f});var a=r(5043);const n=r.p+"static/media/homeBanner.024f945a990ae17b81b7.png",s=r.p+"static/media/homeBanner-mobile.ee0895c78898c22761ef.png",o=r.p+"static/media/aboutBanner.cc7a05da2ad0e783537a.png",i=r.p+"static/media/aboutBanner-mobile.66d69f541d29d4a55d43.png";var l,c;const d=["title","titleId"];function u(){return u=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)({}).hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},u.apply(null,arguments)}function h(e,t){let{title:r,titleId:n}=e,s=function(e,t){if(null==e)return{};var r,a,n=function(e,t){if(null==e)return{};var r={};for(var a in e)if({}.hasOwnProperty.call(e,a)){if(-1!==t.indexOf(a))continue;r[a]=e[a]}return r}(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(a=0;a<s.length;a++)r=s[a],-1===t.indexOf(r)&&{}.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}(e,d);return a.createElement("svg",u({xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round",ref:t,"aria-labelledby":n},s),r?a.createElement("title",{id:n},r):null,l||(l=a.createElement("circle",{cx:11,cy:11,r:8})),c||(c=a.createElement("line",{x1:21,y1:21,x2:16.65,y2:16.65})))}const m=a.forwardRef(h);r.p;var p=r(579);const g=e=>{let{onSearch:t}=e;const[r,n]=(0,a.useState)("");return(0,p.jsxs)("div",{className:"search-bar",children:[(0,p.jsx)(m,{className:"search-bar__icon"}),(0,p.jsx)("input",{type:"text",className:"search-bar__input",placeholder:"Rechercher une location...",value:r,onChange:e=>{const{value:r}=e.target;n(r),t(r)}}),r&&(0,p.jsx)("button",{type:"button",className:"search-bar__clear-button",onClick:()=>{n(""),t("")},children:"\xd7"})]})},f=e=>{let{banner:t,title:r,onSearch:a}=e;const l="homeBanner"===t?n:o,c="homeBanner"===t?s:i;return"homeBanner"===t?(0,p.jsxs)("div",{className:"banner -hero",children:[(0,p.jsx)("img",{className:"banner__image",src:l,srcSet:"".concat(c," 768w, ").concat(l," 1280w"),sizes:"(max-width: 768px) 100vw, 1280px",alt:"Int\xe9rieur d'un appartement lumineux"}),(0,p.jsx)("div",{className:"banner__mask"}),(0,p.jsxs)("div",{className:"hero-content",children:[(0,p.jsx)("h1",{children:"Chez vous, partout et ailleurs"}),(0,p.jsx)("p",{children:"D\xe9couvrez plus de 500 logements de qualit\xe9 v\xe9rifi\xe9s"}),(0,p.jsx)(g,{onSearch:a}),(0,p.jsx)("div",{className:"trust-indicators",children:"\u2b50 4.8/5 \u2022 \ud83c\udfe0 500+ logements \u2022 \u2705 100% v\xe9rifi\xe9s"})]})]}):(0,p.jsxs)("div",{className:"banner",children:[(0,p.jsx)("img",{className:"banner__image",src:l,srcSet:"".concat(c," 768w, ").concat(l," 1280w"),sizes:"(max-width: 768px) 100vw, 1280px",alt:"Banni\xe8re de Kasa"}),(0,p.jsx)("h1",{className:"banner__text",children:r})]})}},1541:(e,t,r)=>{r.d(t,{A:()=>s});r(5043);var a=r(9367),n=r(579);const s=e=>{let{title:t,description:r,keywords:s,children:o}=e;return(0,n.jsxs)(a.mg,{children:[(0,n.jsx)("title",{children:t?"".concat(t," | Kasa"):"Kasa - Trouvez le logement de vos r\xeaves"}),(0,n.jsx)("meta",{name:"description",content:r||"D\xe9couvrez des milliers de logements uniques pour votre prochain voyage. Kasa vous met en relation avec des h\xf4tes de confiance."}),s&&(0,n.jsx)("meta",{name:"keywords",content:s}),o]})}},5339:(e,t,r)=>{r.r(t),r.d(t,{default:()=>O});var a=r(5043),n=r(1541),s=r(1358),o=r(8128),i=r(579);const l=e=>{let{onFilterChange:t,allTags:r}=e;const[n,s]=(0,a.useState)(500),[o,l]=(0,a.useState)("");return(0,a.useEffect)(()=>{t({maxPrice:n,tag:o})},[n,o,t]),(0,i.jsxs)("div",{className:"filter-bar",children:[(0,i.jsxs)("div",{className:"filter-bar__group",children:[(0,i.jsxs)("label",{htmlFor:"price-filter",children:["Prix maximum : ",(0,i.jsxs)("span",{children:[n,"\u20ac"]})]}),(0,i.jsx)("input",{type:"range",id:"price-filter",min:"50",max:"500",step:"10",value:n,onChange:e=>s(Number(e.target.value)),className:"filter-bar__slider"})]}),(0,i.jsxs)("div",{className:"filter-bar__group",children:[(0,i.jsx)("label",{children:"Type de logement :"}),(0,i.jsxs)("div",{className:"filter-bar__tags",children:[(0,i.jsx)("button",{onClick:()=>l(""),className:"filter-bar__tag ".concat(""===o?"-active":""),children:"Tous"}),r.map(e=>(0,i.jsx)("button",{onClick:()=>l(e),className:"filter-bar__tag ".concat(o===e?"-active":""),children:e},e))]})]})]})};const c=function(e,t){const[r,n]=(0,a.useState)(e);return(0,a.useEffect)(()=>{const r=setTimeout(()=>{n(e)},t);return()=>{clearTimeout(r)}},[e,t]),r},d=()=>{const[e,t]=(0,a.useState)(!1),r=()=>{window.pageYOffset>300?t(!0):t(!1)};return(0,a.useEffect)(()=>(window.addEventListener("scroll",r),()=>{window.removeEventListener("scroll",r)}),[]),(0,i.jsx)("div",{className:"back-to-top",children:e&&(0,i.jsx)("button",{onClick:()=>{window.scrollTo({top:0,behavior:"smooth"})},className:"back-to-top__button","aria-label":"Retour en haut",children:(0,i.jsx)("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:(0,i.jsx)("path",{d:"M12 8L6 14L7.41 15.41L12 10.83L16.59 15.41L18 14L12 8Z",fill:"white"})})})})};var u=r(3216),h=r(5187);const m=()=>{const{user:e}=(0,h.As)(),t=(0,u.Zp)();return e&&"host"===e.role?null:(0,i.jsxs)("div",{className:"host-cta-content",children:[(0,i.jsx)("h2",{children:"Pr\xeat \xe0 vous lancer ?"}),(0,i.jsx)("p",{children:"Devenez h\xf4te sur Kasa et commencez \xe0 gagner un revenu compl\xe9mentaire en toute simplicit\xe9."}),(0,i.jsx)("button",{onClick:()=>{e?t("/become-a-host/onboarding"):t("/login",{state:{from:"/become-a-host/onboarding"}})},className:"host-cta-button",children:"Commencer"})]})};var p=r(5475);const g=e=>{let{article:t}=e;return(0,i.jsxs)("div",{className:"featured-blog-card",children:[(0,i.jsx)("img",{src:t.imageUrl,alt:t.title,className:"featured-blog-card__image"}),(0,i.jsxs)("div",{className:"featured-blog-card__content",children:[(0,i.jsx)("h3",{children:t.title}),(0,i.jsx)("p",{children:t.excerpt}),(0,i.jsx)(p.N_,{to:"/blog/".concat(t.id),className:"featured-blog-card__link",children:"Lire la suite"})]})]})},f=e=>{let{featuredArticle:t}=e;return(0,i.jsx)("section",{className:"home-highlights kasa__wrapper",children:(0,i.jsxs)("div",{className:"home-highlights__grid",children:[(0,i.jsx)("div",{className:"home-highlights__cta-container",children:(0,i.jsx)(m,{})}),(0,i.jsx)("div",{className:"home-highlights__blog-container",children:(0,i.jsx)(g,{article:t})})]})})};var v=r(9379),x=r(9896),j=r(9419),b=r(9349),w=r(6036),_=r(3318),y=r(8223),N=r(228),k=r.n(N);r(6433),r(9573);const S=e=>{let{points:t}=e;const r=(0,x.ko)();return(0,a.useEffect)(()=>{if(t&&t.length>0){const e=k().latLngBounds(t);r.fitBounds(e,{padding:[50,50]})}},[t,r]),null},C=e=>{let{logements:t}=e;const r=(0,u.Zp)();if(!t||0===t.length)return(0,i.jsx)("div",{children:"Aucun logement \xe0 afficher sur la carte."});const a=e=>{if(e.coordinates&&e.coordinates.latitude)return[e.coordinates.latitude,e.coordinates.longitude];const t=e.location.toLowerCase();return t.includes("paris")?[48.8566,2.3522]:t.includes("lyon")?[45.764,4.8357]:t.includes("marseille")?[43.2965,5.3698]:t.includes("lille")?[50.6292,3.0573]:null},n=t.map(e=>(0,v.A)((0,v.A)({},e),{},{position:a(e)})).filter(e=>null!==e.position),s=n.map(e=>e.position);return(0,i.jsxs)(j.W,{center:[46.603354,1.888334],zoom:6,scrollWheelZoom:!1,style:{height:"400px",width:"100%"},children:[(0,i.jsx)(S,{points:s}),(0,i.jsx)(b.e,{url:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",attribution:'\xa9 <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors'}),(0,i.jsx)(y.A,{zoomToBoundsOnClick:!0,showCoverageOnHover:!0,spiderfyOnMaxZoom:!0,children:n.map(e=>{const t=e.price||"N/A";return(0,i.jsx)(w.p,{position:e.position,icon:k().divIcon({html:'<div class="custom-marker"><div class="custom-marker-inner">'.concat(t,"\u20ac</div></div>"),className:"",iconSize:[40,40],iconAnchor:[20,40],popupAnchor:[0,-40]}),children:(0,i.jsx)(_.z,{children:(0,i.jsxs)("div",{children:[(0,i.jsx)("strong",{children:e.title}),(0,i.jsx)("p",{children:e.address||e.location}),(0,i.jsx)("button",{onClick:()=>r("/house/".concat(e.id)),style:{cursor:"pointer",marginTop:"5px"},children:"Voir le logement"})]})})},e.id)})})]})},O=()=>{const[e,t]=(0,a.useState)(""),r=c(e,500),[u,h]=(0,a.useState)([]),[m,p]=(0,a.useState)([]),[g,v]=(0,a.useState)({maxPrice:500,tag:""}),[x,j]=(0,a.useState)(new Set),b=localStorage.getItem("token");(0,a.useEffect)(()=>{fetch("".concat("https://kasa-backend.onrender.com/api","/logements")).then(e=>e.json()).then(e=>{h(e),p(e)}).catch(e=>console.error("Error fetching housing data:",e)),b&&fetch("".concat("https://kasa-backend.onrender.com/api","/me/favorites"),{headers:{Authorization:"Bearer ".concat(b)}}).then(e=>e.json()).then(e=>{Array.isArray(e)&&j(new Set(e.map(e=>e.id)))}).catch(e=>console.error("Error fetching favorites:",e))},[b]),(0,a.useEffect)(()=>{const e=u.filter(e=>{const t=r.toLowerCase(),a=e.title.toLowerCase().includes(t),n=e.location.toLowerCase().includes(t),s=a||n,o=e.price<=g.maxPrice,i=!g.tag||e.tags&&e.tags.includes(g.tag);return s&&o&&i});p(e)},[r,u,g]);const w=[...new Set(u.flatMap(e=>e.tags||[]))];return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(n.A,{}),(0,i.jsxs)("main",{className:"kasa__wrapper fade-in",children:[(0,i.jsx)(s.A,{banner:"homeBanner",onSearch:t}),(0,i.jsx)(l,{onFilterChange:v,allTags:w}),(0,i.jsx)("div",{role:"status","aria-live":"polite",className:"visually-hidden",children:r&&"".concat(m.length," r\xe9sultats trouv\xe9s")}),(0,i.jsxs)("section",{className:"global-map-container",children:[(0,i.jsx)("h2",{className:"global-map-title",children:"D\xe9couvrez nos logements sur la carte"}),(0,i.jsx)(C,{logements:m})]}),(0,i.jsx)(f,{featuredArticle:{id:"pourquoi-investir-immobilier-locatif",title:"Pourquoi investir dans l\u2019immobilier locatif en 2024 ?",excerpt:"D\xe9couvrez les raisons pour lesquelles l\u2019investissement locatif reste une valeur s\xfbre et comment Kasa peut vous accompagner dans votre projet.",imageUrl:"https://images.unsplash.com/photo-1560448204-e02f11c3d0e2?ixlib=rb-4.0.3&ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&auto=format&fit=crop&w=1470&q=80"}}),(0,i.jsx)(o.A,{filteredData:m,favorites:x,onToggleFavorite:(e,t)=>{const r=new Set(x);t?r.add(e):r.delete(e),j(r)}})]}),(0,i.jsx)(d,{})]})}},8128:(e,t,r)=>{r.d(t,{A:()=>m});var a,n=r(5043),s=r(5475);const o=["title","titleId"];function i(){return i=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)({}).hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},i.apply(null,arguments)}function l(e,t){let{title:r,titleId:s}=e,l=function(e,t){if(null==e)return{};var r,a,n=function(e,t){if(null==e)return{};var r={};for(var a in e)if({}.hasOwnProperty.call(e,a)){if(-1!==t.indexOf(a))continue;r[a]=e[a]}return r}(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(a=0;a<s.length;a++)r=s[a],-1===t.indexOf(r)&&{}.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}(e,o);return n.createElement("svg",i({viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",ref:t,"aria-labelledby":s},l),r?n.createElement("title",{id:s},r):null,a||(a=n.createElement("path",{d:"M12.62 20.81C12.28 20.93 11.72 20.93 11.38 20.81C8.48 19.82 2 15.69 2 8.68998C2 5.59998 4.49 3.09998 7.56 3.09998C9.38 3.09998 10.99 3.97998 12 5.33998C13.01 3.97998 14.62 3.09998 16.44 3.09998C19.51 3.09998 22 5.59998 22 8.68998C22 15.69 15.52 19.82 12.62 20.81Z",stroke:"#FFFFFF",strokeWidth:1.5,strokeLinecap:"round",strokeLinejoin:"round"})))}const c=n.forwardRef(l);r.p;var d=r(579);const u=e=>{let{logementId:t,initialIsFavorite:r,onToggle:a}=e;const[s,o]=(0,n.useState)(r);(0,n.useEffect)(()=>{o(r)},[r]);const[i,l]=(0,n.useState)(!1),u=localStorage.getItem("token");return u?(0,d.jsx)("button",{onClick:async e=>{if(e.preventDefault(),i||!u)return;l(!0);const r=s?"DELETE":"POST",n=s?"".concat("https://kasa-backend.onrender.com/api","/me/favorites/").concat(t):"".concat("https://kasa-backend.onrender.com/api","/me/favorites");try{if((await fetch(n,{method:r,headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(u)},body:s?null:JSON.stringify({logementId:t})})).ok){const e=!s;o(e),a&&a(t,e)}else console.error("Failed to update favorite status")}catch(c){console.error("Error updating favorite status:",c)}finally{l(!1)}},className:"favorite-button ".concat(s?"active":""),"aria-label":s?"Remove from favorites":"Add to favorites",disabled:i,children:(0,d.jsx)(c,{})}):null},h=e=>{let{id:t,title:r,cover:a,price:n,isFavorite:o,onToggleFavorite:i}=e;return(0,d.jsxs)(s.N_,{to:"/house/".concat(t),className:"gallery-card",children:[(0,d.jsx)("img",{src:a,alt:r,className:"gallery-card__image",loading:"lazy"}),(0,d.jsx)("div",{className:"gallery-card__overlay"}),(0,d.jsx)(u,{logementId:t,initialIsFavorite:o,onToggle:i}),(0,d.jsxs)("div",{className:"gallery-card__info",children:[(0,d.jsx)("h2",{className:"gallery-card__title",children:r}),n&&(0,d.jsxs)("p",{className:"gallery-card__price",children:[n,"\u20ac / nuit"]})]})]})},m=e=>{let{filteredData:t,favorites:r,onToggleFavorite:a}=e;return(0,d.jsx)("div",{className:"gallery",children:t.length>0?t.map(e=>(0,d.jsx)(h,{id:e.id,cover:e.cover,title:e.title,price:e.price,isFavorite:r.has(e.id),onToggleFavorite:a},e.id)):(0,d.jsx)("p",{className:"gallery__no-results",children:"Aucun logement ne correspond \xe0 votre recherche."})})}}}]);
//# sourceMappingURL=124.f59a5c6a.chunk.js.map