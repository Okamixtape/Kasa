"use strict";(self.webpackChunkkasa=self.webpackChunkkasa||[]).push([[474],{1474:(e,t,r)=>{r.r(t),r.d(t,{default:()=>l});var a=r(5043),s=r(1541),n=r(8128),o=r(8174),i=r(579);const l=()=>{const[e,t]=(0,a.useState)([]),[r,l]=(0,a.useState)(!0),c=localStorage.getItem("token");(0,a.useEffect)(()=>{c?fetch("".concat("https://kasa-backend.onrender.com/api","/me/favorites"),{headers:{Authorization:"Bearer ".concat(c)}}).then(e=>e.json()).then(e=>{Array.isArray(e)&&t(e),l(!1)}).catch(e=>{console.error("Error fetching favorites:",e),l(!1)}):l(!1)},[c]);const d=new Set(e.map(e=>e.id));return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(s.A,{title:"Mes Favoris",description:"Consultez la liste de vos logements favoris sur Kasa."}),(0,i.jsxs)("main",{className:"kasa__wrapper fade-in favorites-page",children:[(0,i.jsx)(o.A,{}),(0,i.jsx)("h1",{className:"favorites-page__title",children:"Mes Favoris"}),r?(0,i.jsx)("p",{children:"Chargement de vos favoris..."}):e.length>0?(0,i.jsx)(n.A,{filteredData:e,favorites:d,onToggleFavorite:(e,r)=>{r||t(t=>t.filter(t=>t.id!==e))}}):(0,i.jsx)("p",{className:"favorites-page__no-results",children:"Vous n'avez pas encore de favoris. Parcourez nos logements et cliquez sur le c\u0153ur pour en ajouter !"})]})]})}},1541:(e,t,r)=>{r.d(t,{A:()=>n});r(5043);var a=r(9367),s=r(579);const n=e=>{let{title:t,description:r,keywords:n,children:o}=e;return(0,s.jsxs)(a.mg,{children:[(0,s.jsx)("title",{children:t?"".concat(t," | Kasa"):"Kasa - Trouvez le logement de vos r\xeaves"}),(0,s.jsx)("meta",{name:"description",content:r||"D\xe9couvrez des milliers de logements uniques pour votre prochain voyage. Kasa vous met en relation avec des h\xf4tes de confiance."}),n&&(0,s.jsx)("meta",{name:"keywords",content:n}),o]})}},8128:(e,t,r)=>{r.d(t,{A:()=>f});var a,s=r(5043),n=r(5475);const o=["title","titleId"];function i(){return i=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)({}).hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},i.apply(null,arguments)}function l(e,t){let{title:r,titleId:n}=e,l=function(e,t){if(null==e)return{};var r,a,s=function(e,t){if(null==e)return{};var r={};for(var a in e)if({}.hasOwnProperty.call(e,a)){if(-1!==t.indexOf(a))continue;r[a]=e[a]}return r}(e,t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);for(a=0;a<n.length;a++)r=n[a],-1===t.indexOf(r)&&{}.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}(e,o);return s.createElement("svg",i({viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",ref:t,"aria-labelledby":n},l),r?s.createElement("title",{id:n},r):null,a||(a=s.createElement("path",{d:"M12.62 20.81C12.28 20.93 11.72 20.93 11.38 20.81C8.48 19.82 2 15.69 2 8.68998C2 5.59998 4.49 3.09998 7.56 3.09998C9.38 3.09998 10.99 3.97998 12 5.33998C13.01 3.97998 14.62 3.09998 16.44 3.09998C19.51 3.09998 22 5.59998 22 8.68998C22 15.69 15.52 19.82 12.62 20.81Z",stroke:"#FFFFFF",strokeWidth:1.5,strokeLinecap:"round",strokeLinejoin:"round"})))}const c=s.forwardRef(l);r.p;var d=r(579);const u=e=>{let{logementId:t,initialIsFavorite:r,onToggle:a}=e;const[n,o]=(0,s.useState)(r);(0,s.useEffect)(()=>{o(r)},[r]);const[i,l]=(0,s.useState)(!1),u=localStorage.getItem("token");return u?(0,d.jsx)("button",{onClick:async e=>{if(e.preventDefault(),i||!u)return;l(!0);const r=n?"DELETE":"POST",s=n?"".concat("https://kasa-backend.onrender.com/api","/me/favorites/").concat(t):"".concat("https://kasa-backend.onrender.com/api","/me/favorites");try{if((await fetch(s,{method:r,headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(u)},body:n?null:JSON.stringify({logementId:t})})).ok){const e=!n;o(e),a&&a(t,e)}else console.error("Failed to update favorite status")}catch(c){console.error("Error updating favorite status:",c)}finally{l(!1)}},className:"favorite-button ".concat(n?"active":""),"aria-label":n?"Remove from favorites":"Add to favorites",disabled:i,children:(0,d.jsx)(c,{})}):null},v=e=>{let{id:t,title:r,cover:a,price:s,isFavorite:o,onToggleFavorite:i}=e;return(0,d.jsxs)(n.N_,{to:"/house/".concat(t),className:"gallery-card",children:[(0,d.jsx)("img",{src:a,alt:r,className:"gallery-card__image",loading:"lazy"}),(0,d.jsx)("div",{className:"gallery-card__overlay"}),(0,d.jsx)(u,{logementId:t,initialIsFavorite:o,onToggle:i}),(0,d.jsxs)("div",{className:"gallery-card__info",children:[(0,d.jsx)("h2",{className:"gallery-card__title",children:r}),s&&(0,d.jsxs)("p",{className:"gallery-card__price",children:[s,"\u20ac / nuit"]})]})]})},f=e=>{let{filteredData:t,favorites:r,onToggleFavorite:a}=e;return(0,d.jsx)("div",{className:"gallery",children:t.length>0?t.map(e=>(0,d.jsx)(v,{id:e.id,cover:e.cover,title:e.title,price:e.price,isFavorite:r.has(e.id),onToggleFavorite:a},e.id)):(0,d.jsx)("p",{className:"gallery__no-results",children:"Aucun logement ne correspond \xe0 votre recherche."})})}},8174:(e,t,r)=>{r.d(t,{A:()=>i});r(5043);var a=r(5475),s=r(985),n=r(7929),o=r(579);const i=()=>(0,o.jsxs)(a.N_,{to:"/",className:"back-link",children:[(0,o.jsx)(s.g,{icon:n.Wzs}),(0,o.jsx)("span",{children:"Retour \xe0 l'accueil"})]})}}]);
//# sourceMappingURL=474.a6cc9b4d.chunk.js.map