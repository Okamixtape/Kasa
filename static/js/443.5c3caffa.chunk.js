"use strict";(self.webpackChunkkasa=self.webpackChunkkasa||[]).push([[443],{1443:(e,t,n)=>{n.r(t),n.d(t,{default:()=>c});var s=n(9379),a=n(5043),i=n(3216),r=n(5187),o=n(579);const c=()=>{const{id:e}=(0,i.g)(),t=(0,i.Zp)(),{user:n}=(0,r.As)(),[c,d]=(0,a.useState)(null),[l,h]=(0,a.useState)(!0),[u,m]=(0,a.useState)(null);(0,a.useEffect)(()=>{(async()=>{try{const t=await fetch("".concat("https://kasa-backend.onrender.com/api","/logements/").concat(e));if(!t.ok)throw new Error("Annonce non trouv\xe9e.");const s=await t.json();n&&s.hostId!==n.id?m("Vous n'\xeates pas autoris\xe9 \xe0 modifier cette annonce."):d(s)}catch(t){m(t.message)}finally{h(!1)}})()},[e,n]);const p=e=>{const{name:t,value:n}=e.target;d(e=>(0,s.A)((0,s.A)({},e),{},{[t]:n}))};return l?(0,o.jsx)("div",{children:"Chargement..."}):u?(0,o.jsxs)("div",{children:["Erreur: ",u]}):c?n&&c.hostId!==n.id?(0,o.jsx)("div",{children:"Vous n'\xeates pas autoris\xe9 \xe0 modifier cette annonce."}):(0,o.jsxs)("div",{className:"edit-listing-page",children:[(0,o.jsx)("h1",{children:"Modifier l'annonce"}),(0,o.jsxs)("form",{onSubmit:async n=>{n.preventDefault();try{if(!(await fetch("".concat("https://kasa-backend.onrender.com/api","/logements/").concat(e),{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(c)})).ok)throw new Error("La mise \xe0 jour a \xe9chou\xe9.");t("/host/dashboard")}catch(s){m(s.message)}},className:"edit-listing-form",children:[(0,o.jsxs)("div",{className:"form-group",children:[(0,o.jsx)("label",{htmlFor:"title",children:"Titre"}),(0,o.jsx)("input",{type:"text",id:"title",name:"title",value:c.title,onChange:p,required:!0})]}),(0,o.jsxs)("div",{className:"form-group",children:[(0,o.jsx)("label",{htmlFor:"description",children:"Description"}),(0,o.jsx)("textarea",{id:"description",name:"description",value:c.description,onChange:p,required:!0})]}),(0,o.jsx)("button",{type:"submit",className:"btn btn-primary",children:"Enregistrer les modifications"})]})]}):(0,o.jsx)("div",{children:"Annonce non trouv\xe9e."})}}}]);
//# sourceMappingURL=443.5c3caffa.chunk.js.map