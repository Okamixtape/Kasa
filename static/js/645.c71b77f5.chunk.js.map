{"version":3,"file":"static/js/645.c71b77f5.chunk.js","mappings":"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","sources":["components/Meta/index.jsx","components/HouseCard/index.jsx","pages/HostDashboardPage/index.jsx"],"sourcesContent":["import React from 'react';\nimport { Helmet } from 'react-helmet-async';\n\nconst Meta = ({ title, description, keywords, children }) => {\n  return (\n    <Helmet>\n      <title>{title ? `${title} | Kasa` : 'Kasa - Trouvez le logement de vos rêves'}</title>\n      <meta \n        name=\"description\" \n        content={description || 'Découvrez des milliers de logements uniques pour votre prochain voyage. Kasa vous met en relation avec des hôtes de confiance.'} \n      />\n      {keywords && <meta name=\"keywords\" content={keywords} />}\n      {children}\n    </Helmet>\n  );\n};\n\nexport default Meta;\n","import React from 'react';\nimport './_house-card.scss';\nimport whiteLogo from '../../assets/whiteLogo.png';\n\nconst HouseCard = ({ cover, tags = [], reviews = [], title, location, id, onBooking, titleAs: TitleTag = 'h3', price }) => {\n\n    return (\n        <div key={id} className=\"houseCard\">\n            {cover && <img src={cover} alt={title} className=\"houseCard__cover\" />}\n            {!cover && (\n                <div className=\"houseCard__placeholder\">\n                    <img src={whiteLogo} alt=\"Kasa Logo\" className=\"houseCard__placeholder-logo\" />\n                </div>\n            )}\n            <div className=\"houseCard__content\">\n                <TitleTag className=\"houseCard__title\">{title}</TitleTag>\n                <p className=\"houseCard__location\">{location}</p>\n                {price && <p className=\"houseCard__price\">{price}€ / nuit</p>}\n                <div className=\"houseCard__tags\">\n                    {tags.map((tag) => (\n                        <p className=\"houseCard__tag\" key={tag}>{tag}</p>\n                    ))}\n                </div>\n            </div>\n\n        </div>\n    );\n};\n\nexport default HouseCard;","import React, { useState, useEffect } from 'react';\nimport { useAuth } from '../../context/AuthContext';\nimport { Link } from 'react-router-dom';\nimport Meta from '../../components/Meta';\nimport HouseCard from '../../components/HouseCard';\nimport '../../style/pages/_host-dashboard-page.scss';\n\nconst HostDashboardPage = () => {\n    const { user } = useAuth();\n    const [listings, setListings] = useState([]);\n    const [bookings, setBookings] = useState([]);\n    const [loading, setLoading] = useState(true);\n    const [error, setError] = useState(null);\n\n    const handleDelete = async (listingId) => {\n        if (window.confirm('Êtes-vous sûr de vouloir supprimer cette annonce ?')) {\n            try {\n                const response = await fetch(`${process.env.REACT_APP_API_URL}/logements/${listingId}`, {\n                    method: 'DELETE',\n                });\n\n                if (!response.ok) {\n                    throw new Error('La suppression a échoué.');\n                }\n\n                setListings(listings.filter(listing => listing.id !== listingId));\n            } catch (err) {\n                setError(err.message);\n            }\n        }\n    };\n\n    useEffect(() => {\n        if (!user) {\n            setLoading(false);\n            setError('Vous devez être connecté pour voir cette page.');\n            return;\n        }\n\n        const fetchData = async () => {\n            try {\n                const [listingsRes, bookingsRes] = await Promise.all([\n                    fetch(`${process.env.REACT_APP_API_URL}/users/${user.id}/logements`),\n                    fetch(`${process.env.REACT_APP_API_URL}/users/${user.id}/bookings`)\n                ]);\n\n                if (!listingsRes.ok || !bookingsRes.ok) {\n                    throw new Error('Erreur lors de la récupération des données.');\n                }\n\n                const listingsData = await listingsRes.json();\n                const bookingsData = await bookingsRes.json();\n\n                setListings(listingsData);\n                setBookings(bookingsData);\n            } catch (err) {\n                setError(err.message);\n            } finally {\n                setLoading(false);\n            }\n        };\n\n        fetchData();\n    }, [user]);\n\n    if (loading) {\n        return <div>Chargement de votre tableau de bord...</div>;\n    }\n\n    if (error) {\n        return <div>Erreur: {error}</div>;\n    }\n    return (\n        <>\n            <Meta \n                title=\"Tableau de bord Hôte\" \n                description=\"Gérez vos annonces, consultez vos réservations et suivez vos revenus.\"\n            />\n            <main className=\"kasa__wrapper fade-in kasa__main-container host-dashboard-page\">\n                <h1>Tableau de bord Hôte</h1>\n                <p>Bienvenue sur votre tableau de bord. D'ici, vous pourrez gérer vos propriétés et réservations.</p>\n\n                <div className=\"dashboard-modules\">\n                    <section className=\"dashboard-module\">\n                        <h2>Performances</h2>\n                        <p>Suivez vos revenus et l'engagement de vos annonces.</p>\n                        <Link to=\"/host/analytics\" className=\"btn btn-primary\">Voir mes statistiques</Link>\n                    </section>\n                    <section className=\"dashboard-module\">\n                        <h2>Mes propriétés</h2>\n                        <div className=\"listings-grid\">\n                            {listings.length > 0 ? (\n                                listings.map(listing => (\n                                    <div key={listing.id} className=\"listing-item\">\n                                        <HouseCard {...listing} />\n                                        <div className=\"listing-actions\">\n                                            <Link to={`/host/listings/${listing.id}/edit`} className=\"btn btn-secondary\">Modifier</Link>\n                                            <button className=\"btn btn-danger\" onClick={() => handleDelete(listing.id)}>Supprimer</button>\n                                        </div>\n                                    </div>\n                                ))\n                            ) : (\n                                <p>Vous n'avez pas encore de propriété. <Link to=\"/become-a-host/onboarding\">Ajoutez votre premier logement !</Link></p>\n                            )}\n                        </div>\n                    </section>\n                    <section className=\"dashboard-module\">\n                        <h2>Mes réservations</h2>\n                        <div className=\"bookings-list\">\n                            {bookings.length > 0 ? (\n                                bookings.map(booking => {\n                                    const listing = listings.find(l => l.id === booking.houseId);\n                                    return (\n                                        <div key={booking.id} className=\"booking-item\">\n                                            <p><strong>{listing ? listing.title : 'Logement inconnu'}</strong></p>\n                                            <p>Du {new Date(booking.startDate).toLocaleDateString()} au {new Date(booking.endDate).toLocaleDateString()}</p>\n                                        </div>\n                                    );\n                                })\n                            ) : (\n                                <p>Aucune réservation à venir pour le moment.</p>\n                            )}\n                        </div>\n                    </section>\n                </div>\n            </main>\n        </>\n    );\n};\n\nexport default HostDashboardPage;\n"],"names":["_ref","title","description","keywords","children","_jsxs","Helmet","_jsx","concat","name","content","cover","tags","reviews","location","id","onBooking","titleAs","TitleTag","price","className","src","alt","whiteLogo","map","tag","HostDashboardPage","user","useAuth","listings","setListings","useState","bookings","setBookings","loading","setLoading","error","setError","useEffect","async","listingsRes","bookingsRes","Promise","all","fetch","process","ok","Error","listingsData","json","bookingsData","err","message","fetchData","_Fragment","Meta","Link","to","length","listing","HouseCard","_objectSpread","onClick","window","confirm","listingId","method","filter","handleDelete","booking","find","l","houseId","Date","startDate","toLocaleDateString","endDate"],"sourceRoot":""}