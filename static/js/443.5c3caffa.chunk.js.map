{"version":3,"file":"static/js/443.5c3caffa.chunk.js","mappings":"8KAKA,MAgFA,EAhFwBA,KACpB,MAAM,GAAEC,IAAOC,EAAAA,EAAAA,KACTC,GAAWC,EAAAA,EAAAA,OACX,KAAEC,IAASC,EAAAA,EAAAA,OACVC,EAASC,IAAcC,EAAAA,EAAAA,UAAS,OAChCC,EAASC,IAAcF,EAAAA,EAAAA,WAAS,IAChCG,EAAOC,IAAYJ,EAAAA,EAAAA,UAAS,OAEnCK,EAAAA,EAAAA,WAAU,KACeC,WACjB,IACI,MAAMC,QAAiBC,MAAM,GAADC,OAAIC,wCAA6B,eAAAD,OAAcjB,IAC3E,IAAKe,EAASI,GACV,MAAM,IAAIC,MAAM,2BAEpB,MAAMC,QAAaN,EAASO,OACxBlB,GAAQiB,EAAKE,SAAWnB,EAAKJ,GAC7BY,EAAS,+DAETL,EAAWc,EAEnB,CAAE,MAAOG,GACLZ,EAASY,EAAIC,QACjB,CAAC,QACGf,GAAW,EACf,GAGJgB,IACD,CAAC1B,EAAII,IAER,MAAMuB,EAAgBC,IAClB,MAAM,KAAEC,EAAI,MAAEC,GAAUF,EAAEG,OAC1BxB,EAAWyB,IAAIC,EAAAA,EAAAA,IAAAA,EAAAA,EAAAA,GAAA,GAAUD,GAAI,IAAE,CAACH,GAAOC,MAwB3C,OAAIrB,GAAgByB,EAAAA,EAAAA,KAAA,OAAAC,SAAK,kBACrBxB,GAAcyB,EAAAA,EAAAA,MAAA,OAAAD,SAAA,CAAK,WAASxB,KAC3BL,EACDF,GAAQE,EAAQiB,SAAWnB,EAAKJ,IAAWkC,EAAAA,EAAAA,KAAA,OAAAC,SAAK,iEAGhDC,EAAAA,EAAAA,MAAA,OAAKC,UAAU,oBAAmBF,SAAA,EAC9BD,EAAAA,EAAAA,KAAA,MAAAC,SAAI,wBACJC,EAAAA,EAAAA,MAAA,QAAME,SA7BOxB,UACjBc,EAAEW,iBACF,IASI,WARuBvB,MAAM,GAADC,OAAIC,wCAA6B,eAAAD,OAAcjB,GAAM,CAC7EwC,OAAQ,MACRC,QAAS,CACL,eAAgB,oBAEpBC,KAAMC,KAAKC,UAAUtC,MAGXa,GACV,MAAM,IAAIC,MAAM,qCAGpBlB,EAAS,kBACb,CAAE,MAAOsB,GACLZ,EAASY,EAAIC,QACjB,GAWkCY,UAAU,oBAAmBF,SAAA,EACvDC,EAAAA,EAAAA,MAAA,OAAKC,UAAU,aAAYF,SAAA,EACvBD,EAAAA,EAAAA,KAAA,SAAOW,QAAQ,QAAOV,SAAC,WACvBD,EAAAA,EAAAA,KAAA,SAAOY,KAAK,OAAO9C,GAAG,QAAQ6B,KAAK,QAAQC,MAAOxB,EAAQyC,MAAOC,SAAUrB,EAAcsB,UAAQ,QAErGb,EAAAA,EAAAA,MAAA,OAAKC,UAAU,aAAYF,SAAA,EACvBD,EAAAA,EAAAA,KAAA,SAAOW,QAAQ,cAAaV,SAAC,iBAC7BD,EAAAA,EAAAA,KAAA,YAAUlC,GAAG,cAAc6B,KAAK,cAAcC,MAAOxB,EAAQ4C,YAAaF,SAAUrB,EAAcsB,UAAQ,QAE9Gf,EAAAA,EAAAA,KAAA,UAAQY,KAAK,SAAST,UAAU,kBAAiBF,SAAC,yCAfzCD,EAAAA,EAAAA,KAAA,OAAAC,SAAK,4B","sources":["pages/EditListingPage/index.jsx"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { useParams, useNavigate } from 'react-router-dom';\nimport { useAuth } from '../../context/AuthContext';\nimport './index.scss';\n\nconst EditListingPage = () => {\n    const { id } = useParams();\n    const navigate = useNavigate();\n    const { user } = useAuth();\n    const [listing, setListing] = useState(null);\n    const [loading, setLoading] = useState(true);\n    const [error, setError] = useState(null);\n\n    useEffect(() => {\n        const fetchListing = async () => {\n            try {\n                const response = await fetch(`${process.env.REACT_APP_API_URL}/logements/${id}`);\n                if (!response.ok) {\n                    throw new Error('Annonce non trouvée.');\n                }\n                const data = await response.json();\n                if (user && data.hostId !== user.id) {\n                    setError('Vous n\\'êtes pas autorisé à modifier cette annonce.');\n                } else {\n                    setListing(data);\n                }\n            } catch (err) {\n                setError(err.message);\n            } finally {\n                setLoading(false);\n            }\n        };\n\n        fetchListing();\n    }, [id, user]);\n\n    const handleChange = (e) => {\n        const { name, value } = e.target;\n        setListing(prev => ({ ...prev, [name]: value }));\n    };\n\n    const handleSubmit = async (e) => {\n        e.preventDefault();\n        try {\n            const response = await fetch(`${process.env.REACT_APP_API_URL}/logements/${id}`, {\n                method: 'PUT',\n                headers: {\n                    'Content-Type': 'application/json',\n                },\n                body: JSON.stringify(listing),\n            });\n\n            if (!response.ok) {\n                throw new Error('La mise à jour a échoué.');\n            }\n\n            navigate('/host/dashboard');\n        } catch (err) {\n            setError(err.message);\n        }\n    };\n\n    if (loading) return <div>Chargement...</div>;\n    if (error) return <div>Erreur: {error}</div>;\n    if (!listing) return <div>Annonce non trouvée.</div>;\n    if (user && listing.hostId !== user.id) return <div>Vous n'êtes pas autorisé à modifier cette annonce.</div>;\n\n    return (\n        <div className=\"edit-listing-page\">\n            <h1>Modifier l'annonce</h1>\n            <form onSubmit={handleSubmit} className=\"edit-listing-form\">\n                <div className=\"form-group\">\n                    <label htmlFor=\"title\">Titre</label>\n                    <input type=\"text\" id=\"title\" name=\"title\" value={listing.title} onChange={handleChange} required />\n                </div>\n                <div className=\"form-group\">\n                    <label htmlFor=\"description\">Description</label>\n                    <textarea id=\"description\" name=\"description\" value={listing.description} onChange={handleChange} required />\n                </div>\n                <button type=\"submit\" className=\"btn btn-primary\">Enregistrer les modifications</button>\n            </form>\n        </div>\n    );\n};\n\nexport default EditListingPage;\n"],"names":["EditListingPage","id","useParams","navigate","useNavigate","user","useAuth","listing","setListing","useState","loading","setLoading","error","setError","useEffect","async","response","fetch","concat","process","ok","Error","data","json","hostId","err","message","fetchListing","handleChange","e","name","value","target","prev","_objectSpread","_jsx","children","_jsxs","className","onSubmit","preventDefault","method","headers","body","JSON","stringify","htmlFor","type","title","onChange","required","description"],"sourceRoot":""}