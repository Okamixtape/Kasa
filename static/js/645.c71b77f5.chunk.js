"use strict";(self.webpackChunkkasa=self.webpackChunkkasa||[]).push([[645],{1541:(e,s,a)=>{a.d(s,{A:()=>t});a(5043);var r=a(9367),n=a(579);const t=e=>{let{title:s,description:a,keywords:t,children:o}=e;return(0,n.jsxs)(r.mg,{children:[(0,n.jsx)("title",{children:s?"".concat(s," | Kasa"):"Kasa - Trouvez le logement de vos r\xeaves"}),(0,n.jsx)("meta",{name:"description",content:a||"D\xe9couvrez des milliers de logements uniques pour votre prochain voyage. Kasa vous met en relation avec des h\xf4tes de confiance."}),t&&(0,n.jsx)("meta",{name:"keywords",content:t}),o]})}},4887:(e,s,a)=>{a.d(s,{A:()=>t});a(5043);var r=a(3652),n=a(579);const t=e=>{let{cover:s,tags:a=[],reviews:t=[],title:o,location:i,id:c,onBooking:d,titleAs:l="h3",price:h}=e;return(0,n.jsxs)("div",{className:"houseCard",children:[s&&(0,n.jsx)("img",{src:s,alt:o,className:"houseCard__cover"}),!s&&(0,n.jsx)("div",{className:"houseCard__placeholder",children:(0,n.jsx)("img",{src:r,alt:"Kasa Logo",className:"houseCard__placeholder-logo"})}),(0,n.jsxs)("div",{className:"houseCard__content",children:[(0,n.jsx)(l,{className:"houseCard__title",children:o}),(0,n.jsx)("p",{className:"houseCard__location",children:i}),h&&(0,n.jsxs)("p",{className:"houseCard__price",children:[h,"\u20ac / nuit"]}),(0,n.jsx)("div",{className:"houseCard__tags",children:a.map(e=>(0,n.jsx)("p",{className:"houseCard__tag",children:e},e))})]})]},c)}},6645:(e,s,a)=>{a.r(s),a.d(s,{default:()=>l});var r=a(9379),n=a(5043),t=a(5187),o=a(5475),i=a(1541),c=a(4887),d=a(579);const l=()=>{const{user:e}=(0,t.As)(),[s,a]=(0,n.useState)([]),[l,h]=(0,n.useState)([]),[u,m]=(0,n.useState)(!0),[p,v]=(0,n.useState)(null);return(0,n.useEffect)(()=>{if(!e)return m(!1),void v("Vous devez \xeatre connect\xe9 pour voir cette page.");(async()=>{try{const[s,r]=await Promise.all([fetch("".concat("https://kasa-backend.onrender.com/api","/users/").concat(e.id,"/logements")),fetch("".concat("https://kasa-backend.onrender.com/api","/users/").concat(e.id,"/bookings"))]);if(!s.ok||!r.ok)throw new Error("Erreur lors de la r\xe9cup\xe9ration des donn\xe9es.");const n=await s.json(),t=await r.json();a(n),h(t)}catch(s){v(s.message)}finally{m(!1)}})()},[e]),u?(0,d.jsx)("div",{children:"Chargement de votre tableau de bord..."}):p?(0,d.jsxs)("div",{children:["Erreur: ",p]}):(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)(i.A,{title:"Tableau de bord H\xf4te",description:"G\xe9rez vos annonces, consultez vos r\xe9servations et suivez vos revenus."}),(0,d.jsxs)("main",{className:"kasa__wrapper fade-in kasa__main-container host-dashboard-page",children:[(0,d.jsx)("h1",{children:"Tableau de bord H\xf4te"}),(0,d.jsx)("p",{children:"Bienvenue sur votre tableau de bord. D'ici, vous pourrez g\xe9rer vos propri\xe9t\xe9s et r\xe9servations."}),(0,d.jsxs)("div",{className:"dashboard-modules",children:[(0,d.jsxs)("section",{className:"dashboard-module",children:[(0,d.jsx)("h2",{children:"Performances"}),(0,d.jsx)("p",{children:"Suivez vos revenus et l'engagement de vos annonces."}),(0,d.jsx)(o.N_,{to:"/host/analytics",className:"btn btn-primary",children:"Voir mes statistiques"})]}),(0,d.jsxs)("section",{className:"dashboard-module",children:[(0,d.jsx)("h2",{children:"Mes propri\xe9t\xe9s"}),(0,d.jsx)("div",{className:"listings-grid",children:s.length>0?s.map(e=>(0,d.jsxs)("div",{className:"listing-item",children:[(0,d.jsx)(c.A,(0,r.A)({},e)),(0,d.jsxs)("div",{className:"listing-actions",children:[(0,d.jsx)(o.N_,{to:"/host/listings/".concat(e.id,"/edit"),className:"btn btn-secondary",children:"Modifier"}),(0,d.jsx)("button",{className:"btn btn-danger",onClick:()=>(async e=>{if(window.confirm("\xcates-vous s\xfbr de vouloir supprimer cette annonce ?"))try{if(!(await fetch("".concat("https://kasa-backend.onrender.com/api","/logements/").concat(e),{method:"DELETE"})).ok)throw new Error("La suppression a \xe9chou\xe9.");a(s.filter(s=>s.id!==e))}catch(r){v(r.message)}})(e.id),children:"Supprimer"})]})]},e.id)):(0,d.jsxs)("p",{children:["Vous n'avez pas encore de propri\xe9t\xe9. ",(0,d.jsx)(o.N_,{to:"/become-a-host/onboarding",children:"Ajoutez votre premier logement !"})]})})]}),(0,d.jsxs)("section",{className:"dashboard-module",children:[(0,d.jsx)("h2",{children:"Mes r\xe9servations"}),(0,d.jsx)("div",{className:"bookings-list",children:l.length>0?l.map(e=>{const a=s.find(s=>s.id===e.houseId);return(0,d.jsxs)("div",{className:"booking-item",children:[(0,d.jsx)("p",{children:(0,d.jsx)("strong",{children:a?a.title:"Logement inconnu"})}),(0,d.jsxs)("p",{children:["Du ",new Date(e.startDate).toLocaleDateString()," au ",new Date(e.endDate).toLocaleDateString()]})]},e.id)}):(0,d.jsx)("p",{children:"Aucune r\xe9servation \xe0 venir pour le moment."})})]})]})]})]})}}}]);
//# sourceMappingURL=645.c71b77f5.chunk.js.map