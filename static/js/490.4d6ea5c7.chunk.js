"use strict";(self.webpackChunkkasa=self.webpackChunkkasa||[]).push([[490],{1541:(e,s,a)=>{a.d(s,{A:()=>r});a(5043);var n=a(9367),t=a(579);const r=e=>{let{title:s,description:a,keywords:r,children:o}=e;return(0,t.jsxs)(n.mg,{children:[(0,t.jsx)("title",{children:s?"".concat(s," | Kasa"):"Kasa - Trouvez le logement de vos r\xeaves"}),(0,t.jsx)("meta",{name:"description",content:a||"D\xe9couvrez des milliers de logements uniques pour votre prochain voyage. Kasa vous met en relation avec des h\xf4tes de confiance."}),r&&(0,t.jsx)("meta",{name:"keywords",content:r}),o]})}},7490:(e,s,a)=>{a.r(s),a.d(s,{default:()=>u});var n=a(9379),t=a(5043),r=a(3216),o=a(5475),i=a(1541),c=a(5187),l=a(4741),d=a(579);const u=()=>{const[e,s]=(0,t.useState)(""),[a,u]=(0,t.useState)(""),[m,h]=(0,t.useState)(""),{login:p}=(0,c.As)(),{addNotification:v}=(0,l.h)(),g=(0,r.Zp)();return(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)(i.A,{title:"Connexion",description:"Connectez-vous \xe0 votre compte Kasa pour acc\xe9der \xe0 vos r\xe9servations et g\xe9rer votre profil."}),(0,d.jsx)("main",{className:"kasa__wrapper fade-in kasa__main-container auth-page",children:(0,d.jsxs)("div",{className:"auth-container",children:[(0,d.jsx)("h1",{children:"Connexion"}),(0,d.jsxs)("form",{onSubmit:async s=>{s.preventDefault(),h("");try{const s=await fetch("".concat("https://kasa-backend.onrender.com/api","/login"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:e,password:a})}),t=await s.json();if(!s.ok)throw new Error(t.message||"Failed to login");const r="host"===t.user.role?["view_host_dashboard","manage_listings","view_analytics"]:["write_review","view_bookings"],o=(0,n.A)((0,n.A)({},t.user),{},{permissions:r});p(t.token,o),v("Bienvenue, ".concat(o.name," !"),"success"),g("/")}catch(t){h(t.message)}},className:"auth-form",children:[(0,d.jsxs)("div",{className:"form-group",children:[(0,d.jsx)("label",{htmlFor:"email",children:"Adresse e-mail"}),(0,d.jsx)("input",{type:"email",id:"email",value:e,onChange:e=>s(e.target.value),required:!0})]}),(0,d.jsxs)("div",{className:"form-group",children:[(0,d.jsx)("label",{htmlFor:"password",children:"Mot de passe"}),(0,d.jsx)("input",{type:"password",id:"password",value:a,onChange:e=>u(e.target.value),required:!0})]}),m&&(0,d.jsx)("p",{className:"error-message",children:m}),(0,d.jsx)("button",{type:"submit",className:"auth-button",children:"Se connecter"})]}),(0,d.jsxs)("p",{className:"auth-link",children:["Vous n'avez pas de compte ? ",(0,d.jsx)(o.N_,{to:"/signup",children:"Inscrivez-vous"})]})]})})]})}}}]);
//# sourceMappingURL=490.4d6ea5c7.chunk.js.map