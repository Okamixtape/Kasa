"use strict";(self.webpackChunkkasa=self.webpackChunkkasa||[]).push([[474],{1474:(e,t,r)=>{r.r(t),r.d(t,{default:()=>i});var a=r(5043),s=r(1541),o=r(8128),n=r(8174),l=r(579);const i=()=>{const[e,t]=(0,a.useState)([]),[r,i]=(0,a.useState)(!0),c=localStorage.getItem("token");(0,a.useEffect)(()=>{c?fetch("".concat("https://kasa-backend.onrender.com/api","/me/favorites"),{headers:{Authorization:"Bearer ".concat(c)}}).then(e=>e.json()).then(e=>{Array.isArray(e)&&t(e),i(!1)}).catch(e=>{console.error("Error fetching favorites:",e),i(!1)}):i(!1)},[c]);const d=new Set(e.map(e=>e.id));return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(s.A,{title:"Mes Favoris",description:"Consultez la liste de vos logements favoris sur Kasa."}),(0,l.jsxs)("main",{className:"kasa__wrapper fade-in favorites-page",children:[(0,l.jsx)(n.A,{}),(0,l.jsx)("h1",{className:"favorites-page__title",children:"Mes Favoris"}),r?(0,l.jsx)("p",{children:"Chargement de vos favoris..."}):e.length>0?(0,l.jsx)(o.A,{filteredData:e,favorites:d,onToggleFavorite:(e,r)=>{r||t(t=>t.filter(t=>t.id!==e))}}):(0,l.jsx)("p",{className:"favorites-page__no-results",children:"Vous n'avez pas encore de favoris. Parcourez nos logements et cliquez sur le c\u0153ur pour en ajouter !"})]})]})}},1541:(e,t,r)=>{r.d(t,{A:()=>o});r(5043);var a=r(9367),s=r(579);const o=e=>{let{title:t,description:r,keywords:o,children:n}=e;return(0,s.jsxs)(a.mg,{children:[(0,s.jsx)("title",{children:t?"".concat(t," | Kasa"):"Kasa - Trouvez le logement de vos r\xeaves"}),(0,s.jsx)("meta",{name:"description",content:r||"D\xe9couvrez des milliers de logements uniques pour votre prochain voyage. Kasa vous met en relation avec des h\xf4tes de confiance."}),o&&(0,s.jsx)("meta",{name:"keywords",content:o}),n]})}},8128:(e,t,r)=>{r.d(t,{A:()=>f});var a,s=r(5043),o=r(5475);const n=["title","titleId"];function l(){return l=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)({}).hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},l.apply(null,arguments)}function i(e,t){let{title:r,titleId:o}=e,i=function(e,t){if(null==e)return{};var r,a,s=function(e,t){if(null==e)return{};var r={};for(var a in e)if({}.hasOwnProperty.call(e,a)){if(-1!==t.indexOf(a))continue;r[a]=e[a]}return r}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(a=0;a<o.length;a++)r=o[a],-1===t.indexOf(r)&&{}.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}(e,n);return s.createElement("svg",l({viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",ref:t,"aria-labelledby":o},i),r?s.createElement("title",{id:o},r):null,a||(a=s.createElement("path",{d:"M12.62 20.81C12.28 20.93 11.72 20.93 11.38 20.81C8.48 19.82 2 15.69 2 8.68998C2 5.59998 4.49 3.09998 7.56 3.09998C9.38 3.09998 10.99 3.97998 12 5.33998C13.01 3.97998 14.62 3.09998 16.44 3.09998C19.51 3.09998 22 5.59998 22 8.68998C22 15.69 15.52 19.82 12.62 20.81Z",stroke:"#FFFFFF",strokeWidth:1.5,strokeLinecap:"round",strokeLinejoin:"round"})))}const c=s.forwardRef(i);r.p;var d=r(579);const u=e=>{let{logementId:t,initialIsFavorite:r,onToggle:a}=e;const[o,n]=(0,s.useState)(r);(0,s.useEffect)(()=>{n(r)},[r]);const[l,i]=(0,s.useState)(!1),u=localStorage.getItem("token");return u?(0,d.jsx)("button",{onClick:async e=>{if(e.preventDefault(),l||!u)return;i(!0);const r=o?"DELETE":"POST",s=o?"".concat("https://kasa-backend.onrender.com/api","/me/favorites/").concat(t):"".concat("https://kasa-backend.onrender.com/api","/me/favorites");try{if((await fetch(s,{method:r,headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(u)},body:o?null:JSON.stringify({logementId:t})})).ok){const e=!o;n(e),a&&a(t,e)}else console.error("Failed to update favorite status")}catch(c){console.error("Error updating favorite status:",c)}finally{i(!1)}},className:"favorite-button ".concat(o?"active":""),"aria-label":o?"Remove from favorites":"Add to favorites",disabled:l,children:(0,d.jsx)(c,{})}):null};var v=r(3652);const g=e=>{let{id:t,title:r,cover:a,price:n,isFavorite:l,onToggleFavorite:i}=e;const[c,g]=(0,s.useState)(!1);return(0,d.jsxs)(o.N_,{to:"/house/".concat(t),className:"gallery-card",children:[a&&!c?(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)("img",{src:a,alt:r,className:"gallery-card__image",loading:"lazy",onError:()=>{g(!0)}}),(0,d.jsx)("div",{className:"gallery-card__overlay"})]}):(0,d.jsx)("div",{className:"gallery-card__placeholder",children:(0,d.jsx)("img",{src:v,alt:"Kasa Logo",className:"gallery-card__placeholder-logo"})}),(0,d.jsx)(u,{logementId:t,initialIsFavorite:l,onToggle:i}),(0,d.jsxs)("div",{className:"gallery-card__info",children:[(0,d.jsx)("h2",{className:"gallery-card__title",children:r}),n&&(0,d.jsxs)("p",{className:"gallery-card__price",children:[n,"\u20ac / nuit"]})]})]})},f=e=>{let{filteredData:t,favorites:r,onToggleFavorite:a}=e;return(0,d.jsx)("div",{className:"gallery",children:t.length>0?t.map(e=>(0,d.jsx)(g,{id:e.id,cover:e.cover,title:e.title,price:e.price,isFavorite:r.has(e.id),onToggleFavorite:a},e.id)):(0,d.jsx)("p",{className:"gallery__no-results",children:"Aucun logement ne correspond \xe0 votre recherche."})})}},8174:(e,t,r)=>{r.d(t,{A:()=>l});r(5043);var a=r(5475),s=r(985),o=r(7929),n=r(579);const l=()=>(0,n.jsxs)(a.N_,{to:"/",className:"back-link",children:[(0,n.jsx)(s.g,{icon:o.Wzs}),(0,n.jsx)("span",{children:"Retour \xe0 l'accueil"})]})}}]);
//# sourceMappingURL=474.38c3f644.chunk.js.map